<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
  <div class="card card-custom mb-7 ml-5">
    <div class="card-header flex-wrap border-0 py-5">
      <div class="card-title font-weight-bolder">{{'polls.polls' | translate}}</div>
    </div>
    <div class="card-body">
      <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>
      <div *ngIf="!isLoading"
        class="datatable datatable-bordered datatable-head-custom datatable-default datatable-primary datatable-loaded"
        id="kt_datatable">
        <table class="datatable table">
            <tbody class="datatable-body">
                <ng-container *ngFor="let event of events; let i = index">
                    <tr (click)="toggleShow(event.id)" style="cursor: pointer;">
                        <td class="datatable-cell datatable-toggle-detail" scope="col" style="width: 30px;">
                            <a class="datatable-toggle-detail">
                                <i class="fa" [ngClass]="{ 'fa-caret-right' : !(show && eventId == event.id), 'fa-caret-down' : (show && eventId == event.id) }"></i>
                            </a>
                        </td>
                        <td data-field="Title" aria-label="Title" class="datatable-cell">
                            <b>{{event.name}}</b>
                        </td>
                    </tr>

                    <ng-container *ngIf="eventId == event.id && show">
                      <tr>
                        <td class="datatable-detail" colspan="13">
                            <app-polls-table [id]="event.id"></app-polls-table>
                        </td>
                      </tr>
                    </ng-container>
                </ng-container>
            </tbody>
        </table>
        <div pagination class="datatable-pager datatable-paging-loaded" [page]="pagedSummary.currentPage"
          *ngIf="events.length > 5" [total]="pagedSummary.totalPages" [totalRecords]="pagedSummary.totalCount"
          [size]="pagedSummary.pageSize"
          (sizeChange)="getEvents({ page: pagedSummary.currentPage, itemsPerPage: $event })"
          (pageChange)="getEvents({ page: $event })">
        </div>
      </div>
    </div>
  </div>
</div>
