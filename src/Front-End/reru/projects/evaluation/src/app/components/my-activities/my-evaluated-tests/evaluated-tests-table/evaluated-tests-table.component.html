<app-event-calendar (onDatePicked)="getListByDate($event)" (listOfDates)="getUserTests($event)"
    (listOfCountedEvents)="getListOfCoutedTests($event)">
</app-event-calendar>

    <app-loading-spinner *ngIf="isLoading"></app-loading-spinner>

    <div class="card" *ngIf="!isLoading">
        <div class="card-header text-center" *ngIf="selectedDay != null">
            {{ 'calendar.selected-date' | translate }}: {{displayDate}}
        </div>
        <div class="card-body">
            <div class="table-responsive-xl datatable datatable-bordered datatable-head-custom datatable-default datatable-primary datatable-loaded">
            <table for="kt_datatable" class="datatable table" style="overflow: visible">
                <thead class="text-uppercase text-muted">
                    <tr>
                        <th scope="col" class="colored">
                            <b>{{'dashboard.date-status' | translate}}</b>
                            <i class="fas fa-arrow-down ml-1 colored"></i>
                        </th>
                        <th scope="col">{{'verify-test.student' | translate}}</th>
                        <th scope="col">{{'dashboard.test' | translate}}</th>
                        <th scope="col" style="width: 170px;">
                            {{'dashboard.score' | translate}} / {{'dashboard.min-score' | translate}}
                        </th>
                        <th scope="col" style="width: 170px;">{{'dashboard.result' | translate}}</th>
                        <th scope="col" style="width: 120px"></th>
                    </tr>
                </thead>
                <tbody class="datatable-body" *ngIf="testRowList.length">
                    <tr *ngFor="let test of testRowList">
                        <td>
                            <span class="colored d-block mb-0">
                                <b>{{ test.programmedTime | date: 'dd/MM/yyyy, HH:mm'}}</b>
                            </span>
                            <div class="font-size-sm">
                                {{'statuses.' + enum[test.testStatus] | translate}}
                            </div>
                        </td>
                        <td>{{ test.userName }}</td>
                        <td>{{ test.testTemplateName }}</td>
                        <td>
                            <p *ngIf="test.result == resultEnum.NoResult"> - / {{test.minPercent}}%</p>
                            <p *ngIf="test.result != resultEnum.NoResult">{{ test.accumulatedPercentage }}% / {{test.minPercent}}%</p>
                        </td>
                        <td>{{'statuses.' + resultEnum[test.result] | translate}}</td>
                        <td>
                            <button *ngIf="test.testStatus === enum.Terminated"
                                [routerLink]="['../../tests/verify-test', test.id]" class="btn btn-sm btn-light-success">
                                {{ 'button.verify' | translate }}
                            </button>
                            <button
                                *ngIf="test.testStatus === enum.Verified"
                                class="btn btn-sm btn-blue" [routerLink]="['../test-result', test.id]">
                                {{'tests.view' | translate}}
                            </button>
                        </td>
                    </tr>
                </tbody>
                <tbody class="datatable-body" *ngIf="!testRowList.length">
                    <tr>
                        <td colspan="6" class="text-center">
                            {{ 'message.no-record' | translate }}
                        </td>
                    </tr>
                </tbody>
            </table>
            <div pagination class="datatable-pager datatable-paging-loaded" [page]="pagedSummary.currentPage"
            *ngIf="selectedDay == null" [total]="pagedSummary.totalPages" [totalRecords]="pagedSummary.totalCount"
            [size]="pagedSummary.pageSize" (sizeChange)="getUserTests({ page: 1, itemsPerPage: $event })"
            (pageChange)="getUserTests({ page: $event, itemsPerPage: pagedSummary })">
        </div>
        <div pagination class="datatable-pager datatable-paging-loaded" [page]="pagedSummary.currentPage"
            *ngIf="selectedDay != null" [total]="pagedSummary.totalPages" [totalRecords]="pagedSummary.totalCount"
            [size]="pagedSummary.pageSize" (sizeChange)="getListByDate({ page: 1, itemsPerPage: $event })"
            (pageChange)="getListByDate({ page: $event, itemsPerPage: pagedSummary })">
        </div>
    </div>
        </div>
    </div>

