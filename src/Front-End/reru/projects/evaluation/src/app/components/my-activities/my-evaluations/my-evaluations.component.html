<div class="content d-flex flex-column flex-column-fluid" id="kt_content">
    <div class="card card-custom mb-7 ml-5">
        <div class="card-header flex-wrap border-0 py-5">
            <div class="card-title font-weight-bolder">{{'evaluations.my-evaluations' | translate}}</div>
        </div>
        <div class="card-body">
            <app-loading-spinner *ngIf="isLoading || downloadFile" [contentHeight]="'40vh'" [height]="'5rem'"
                [width]="'5rem'" [colorClass]="'text-primary'">
            </app-loading-spinner>
            <h4 class="text-center text-primary" *ngIf="downloadFile"> {{'print.print-table' | translate}} </h4>

            <div class="datatable datatable-bordered datatable-default datatable-loaded" id="kt_datatable">
                <table for="kt_datatable" class="datatable table" style="overflow: visible" id="evaluatedTestTable"
                    *ngIf="!isLoading && !downloadFile">
                    <thead class="text-uppercase text-muted">
                        <tr>
                            <th scope="col">{{'dashboard.test' | translate}}</th>
                            <th scope="col">{{'verify-test.student' | translate}}</th>
                            <th scope="col">{{'events.event' | translate}}</th>
                            <th scope="col">{{'dashboard.status' | translate}}</th>
                            <!-- <th scope="col">{{'dashboard.result' | translate}}</th> -->
                            <th scope="col" style="width: 150px"></th>
                        </tr>
                    </thead>
                    <tbody class="datatable-body" *ngIf="testRowList.length">
                        <tr *ngFor="let test of testRowList">
                            <td><b>{{ test.testTemplateName }}</b></td>
                            <td>
                                <p class="font-size-lg cursor-pointer text-hover-primary mb-0"
                                    [routerLink]="['../../user-profile', test.userId]" style="white-space: nowrap;">
                                    {{ test.userName }}
                                    <br>
                                    <span class="text-dark-50 font-size-lg font-weight-light">{{ test.idnp }}</span>
                                </p>
                            </td>
                            <td>
                                <span class="font-size-lg" *ngIf="test.eventName">{{ test.eventName }}</span>
                                <span class="font-size-lg" *ngIf="!test.eventName">-</span>
                            </td>
                            <td>
                                <div class="font-size-sm">
                                    <span class="text-dark-50" *ngIf="test.testStatus == enum.InProgress">
                                        {{'statuses.started' | translate}}
                                    </span>
                                    <span class="text-dark-50" *ngIf="test.testStatus == enum.Verified">
                                        {{'statuses.Terminated' | translate}}
                                    </span>
                                    <span class="text-dark-50" *ngIf="test.testStatus == enum.Closed">
                                        {{'statuses.Closed' | translate}}
                                    </span>
                                    <span class="text-dark-50" *ngIf="test.testStatus == enum.Programmed">
                                        {{'verify-test.status-0' | translate}}
                                    </span>
                                </div>
                            </td>
                            <!-- <td>
                                <span>
                                    <span class="font-size-lg"
                                        *ngIf="test.result == resultEnum.NoResult">{{'statuses.NoResult' |
                                        translate}}</span>
                                    <span class="font-size-lg"
                                        *ngIf="test.result == resultEnum.Passed">{{'statuses.passed' |
                                        translate}}</span>
                                    <span class="font-size-lg"
                                        *ngIf="test.result == resultEnum.NotPassed">{{'statuses.not-passed' |
                                        translate}}</span>
                                </span>
                            </td> -->
                            <td>
                                <button *ngIf="test.testStatus == enum.InProgress" class="btn btn-light-success"
                                    [routerLink]="['../performing-evaluation', test.id]">
                                    {{'button.continue' | translate}}
                                </button>
                                <button
                                    *ngIf="test.testStatus == enum.Programmed || test.testStatus == enum.AlowedToStart"
                                    class="btn btn-light-success" [routerLink]="['../start-evaluation', test.id]">
                                    {{'evaluations.start-evaluation' | translate}}
                                </button>
                                <button *ngIf="test.result == resultEnum.NotPassed || test.result == resultEnum.Passed"
                                    class="btn btn-light-success" [routerLink]="['../evaluation-result', test.id]">
                                    {{'tests.view' | translate}}
                                </button>
                            </td>
                        </tr>
                    </tbody>
                    <tbody class="datatable-body" *ngIf="!testRowList.length">
                        <tr>
                            <td colspan="6" class="text-center">
                                {{ 'message.no-record' | translate }}
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div pagination class="datatable-pager datatable-paging-loaded" [page]="pagedSummary.currentPage"
                    *ngIf="testRowList.length" [total]="pagedSummary.totalPages"
                    [totalRecords]="pagedSummary.totalCount" [size]="pagedSummary.pageSize"
                    (sizeChange)="getUserTests({ page: 1, itemsPerPage: $event })"
                    (pageChange)="getUserTests({ page: $event, itemsPerPage: pagedSummary.pageSize })">
                </div>
            </div>

        </div>
    </div>
</div>