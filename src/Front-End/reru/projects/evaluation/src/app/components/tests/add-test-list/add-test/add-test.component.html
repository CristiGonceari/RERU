<div class="row my-10 px-8 my-lg-15 px-lg-10">
  <div class="col-12 col-xl-6  col-xxl-7 mb-5">
    <div class="form" id="kt_contact_add_form">
      <h3 class="mb-10 font-weight-bold text-dark">{{'verify-test.test-details' | translate}}</h3>
      <div class="row">
        <div class="col-xl-12">
          <div class="form-group row" *ngIf="testEvent">
            <label class="col-xl-3 col-lg-3 col-form-label text-right">
              {{'events.event' | translate}}</label>
            <div class="col-lg-9 col-xl-9">
              <select class="form-control form-control-lg form-control-solid" (change)="getActiveTestType()"
                (ngModelChange)="checkIfEventHasEvaluator($event)" [(ngModel)]="event.value"
                name="searchEvent">
                <option value="">{{'questions.select' | translate}}</option>
                <option *ngFor="let item of eventsList" [ngValue]="item.eventId">
                  {{ item.eventName }}
                </option>
              </select>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-xl-3 col-lg-3 col-form-label text-right">
              {{'verify-test.select-user' | translate}}</label>
            <div class="col-lg-9 col-xl-9">
              <form class="example-form">
                <mat-form-field class="example-full-width" appearance="fill">
                  <mat-label>{{'tests.asignee' | translate}}</mat-label>
                  <input #autoCompleteInput type="text" matInput [formControl]="myControl" [(ngModel)]="key"
                    (ngModelChange)="getUsers()" [matAutocomplete]="auto">
                  <mat-autocomplete #auto="matAutocomplete" ariaLabel="aria-label"
                    [autoActiveFirstOption]="true">
                    <mat-option *ngFor="let option of usersList"
                      (click)="addUserToList(option.value, option.label)" [value]="option.label">
                      {{option.label}}
                    </mat-option>
                  </mat-autocomplete>
                </mat-form-field>
              </form>
              <!-- <select class="form-control form-control-lg form-control-solid" [(ngModel)]="user.value"
                name="searchUser">
                <option value="">{{'questions.select' | translate}}</option>
                <option *ngFor="let item of usersList" [ngValue]="item.value">
                  {{ item.label }}
                </option>
              </select> -->
            </div>
          </div>
          <div class="form-group row">
            <label
              class="col-xl-3 col-lg-3 col-form-label text-right">{{'verify-test.select-test-type' | translate}}</label>
            <div class="col-lg-9 col-xl-9">
              <select class="form-control form-control-lg form-control-solid" name="test"
                [(ngModel)]="testType.value" (ngModelChange)="checkIfIsOneAnswer($event)">
                <option value="">{{'questions.select' | translate}}</option>
                <option *ngFor="let testType of selectActiveTests" [ngValue]="testType.testTypeId">
                  {{testType.testTypeName}}
                </option>
              </select>
            </div>
          </div>
          <div class="form-group row">
            <label class="col-xl-3 col-lg-3 col-form-label text-right">
              {{'events.evaluator' | translate}}</label>
            <div class="col-lg-9 col-xl-9">
              <select *ngIf="!(hasEventEvaluator || isTestTypeOneAnswer)"
                class="form-control form-control-lg form-control-solid" [(ngModel)]="evaluator.value"
                name="searchEvaluator">
                <option [value]="null" [selected]="true">{{'questions.select' | translate}}</option>
                <option *ngFor="let item of evaluatorList" [ngValue]="item.value">
                  {{ item.label }}
                </option>
              </select>
              <span *ngIf="isTestTypeOneAnswer"
                class="label label-lg label-light label-inline h-45px px-5 w-100">
                {{'tests.test-type-autoverify' | translate}}
              </span>
              <span *ngIf="hasEventEvaluator && !isTestTypeOneAnswer"
                class="label label-lg label-light label-inline h-45px px-5 w-100">
                {{'tests.event-has-evaluator' | translate}}
              </span>
            </div>
          </div>
          <div class="form-group row" *ngIf="!(hasEventEvaluator || isTestTypeOneAnswer)">
            <label
              class="col-xl-3 col-lg-3 col-form-label text-right">{{'events.show-candidate' | translate}}:</label>
            <div class="ml-5 w-auto my-auto">
              <label class="checkbox checkbox-lg checkbox-inline mr-5">
                <input type="checkbox" name="isSelected" (change)="onItemChange($event)" [value]="showName"
                  [checked]="showName">
                <span></span>
              </label>
            </div>
          </div>
          <div class="form-group row mb-10">
            <label
              class="col-xl-3 col-lg-3 col-form-label text-right">{{'verify-test.programmed-time' | translate}}</label>
            <div class="col-lg-9 col-xl-9">
              <input id="from" [owlDateTime]="dtFrom" [owlDateTimeTrigger]="dtFrom" placeholder="Date Time"
                class="form-control form-control-lg form-control-solid" name="date" [(ngModel)]="date"
                autocomplete="off" />
              <owl-date-time #dtFrom></owl-date-time>
            </div>
          </div>
        </div>
      </div>
      <div class="text-right border-top pt-10">
        <app-button class="btn mr-2" [value]="'button.cancel' | translate" (handle)="backClicked()">
        </app-button>
        <app-add-button class="btn mr-2" [value]="'button.confirm' | translate" (handle)="createTest()">
        </app-add-button>
        <app-confirm-button class="btn" title="{{messageText}}" [disabled]="!printTest"
          [value]="'button.confirm-print' | translate" (handle)="createTestAndPrint()">
        </app-confirm-button>
      </div>
    </div>

  </div>
  <div class="col-12 col-xl-6 col-xxl-5" *ngIf="displayUserNames?.length > 0">
    <div class="form">
      <h3 class="mb-10 font-weight-bold text-dark">{{'tests.user-list-to-add' | translate}}
        <span style="margin-left: 2%;" (click)="sortByName()">
          <span class="svg-icon svg-icon-primary svg-icon-2x">
            <svg xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24"
            version="1.1">
              <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <polygon points="0 0 24 0 24 24 0 24" />
                <rect fill="#000000" opacity="0.3"
                  transform="translate(6.000000, 11.000000) rotate(-180.000000) translate(-6.000000, -11.000000) "
                  x="5" y="5" width="2" height="12" rx="1" />
                <path
                  d="M8.29289322,14.2928932 C8.68341751,13.9023689 9.31658249,13.9023689 9.70710678,14.2928932 C10.0976311,14.6834175 10.0976311,15.3165825 9.70710678,15.7071068 L6.70710678,18.7071068 C6.31658249,19.0976311 5.68341751,19.0976311 5.29289322,18.7071068 L2.29289322,15.7071068 C1.90236893,15.3165825 1.90236893,14.6834175 2.29289322,14.2928932 C2.68341751,13.9023689 3.31658249,13.9023689 3.70710678,14.2928932 L6,16.5857864 L8.29289322,14.2928932 Z"
                  fill="#000000" fill-rule="nonzero" />
                <rect fill="#000000" opacity="0.3"
                  transform="translate(18.000000, 13.000000) scale(1, -1) rotate(-180.000000) translate(-18.000000, -13.000000) "
                  x="17" y="7" width="2" height="12" rx="1" />
                <path
                  d="M20.2928932,5.29289322 C20.6834175,4.90236893 21.3165825,4.90236893 21.7071068,5.29289322 C22.0976311,5.68341751 22.0976311,6.31658249 21.7071068,6.70710678 L18.7071068,9.70710678 C18.3165825,10.0976311 17.6834175,10.0976311 17.2928932,9.70710678 L14.2928932,6.70710678 C13.9023689,6.31658249 13.9023689,5.68341751 14.2928932,5.29289322 C14.6834175,4.90236893 15.3165825,4.90236893 15.7071068,5.29289322 L18,7.58578644 L20.2928932,5.29289322 Z"
                  fill="#000000" fill-rule="nonzero"
                  transform="translate(18.000000, 7.500000) scale(1, -1) translate(-18.000000, -7.500000) " />
              </g>
            </svg>
          </span>
        </span>
      </h3>

      <div class="align-items-vertical">
        <div class="form-group mb-0 row align-items-center"
          *ngFor="let user of displayUserNames; let i = index">
          <label [routerLink]="['../../user-profile', user.value]"
            class="col-8 col-form-label cursor-pointer text-hover-primary">{{user.label}}</label>
          <div class="col-4 d-flex justify-content-end">
            <span class="switch switch-success switch-sm" (click)="deleteFromList(i)">
              <span class="svg-icon svg-icon-primary svg-icon-2x">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                  width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                  <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g transform="translate(12.000000, 12.000000) rotate(-45.000000) translate(-12.000000, -12.000000) translate(4.000000, 4.000000)"
                      fill="#000000">
                      <rect x="0" y="7" width="16" height="2" rx="1" />
                      <rect opacity="0.3"
                        transform="translate(8.000000, 8.000000) rotate(-270.000000) translate(-8.000000, -8.000000) "
                        x="0" y="7" width="16" height="2" rx="1" />
                    </g>
                  </g>
                </svg>
              </span>
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
