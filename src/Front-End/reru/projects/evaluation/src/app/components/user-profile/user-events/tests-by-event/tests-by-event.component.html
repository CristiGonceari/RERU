<app-loading-spinner *ngIf="isLoading || downloadFile" [contentHeight]="'40vh'" [height]="'5rem'" [width]="'5rem'"
    [colorClass]="'text-primary'">
</app-loading-spinner>
<h4 class="text-center text-primary" *ngIf="downloadFile"> {{'print.print-table' | translate}} </h4>

<div class="datatable datatable-bordered datatable-head-custom datatable-default datatable-primary datatable-loaded"
    id="kt_datatable">
    <table class="datatable table" style="overflow: visible" id="eventsTable" *ngIf="!isLoading && !downloadFile">
        <thead class="text-uppercase text-muted">
            <tr>
                <th scope="col" class="colored">{{'dashboard.date' | translate}}</th>
                <th scope="col">{{'dashboard.test' | translate}}</th>
                <th scope="col">{{'dashboard.status' | translate}}</th>
                <th scope="col" style="width: 170px;">
                    {{'dashboard.score' | translate}} / {{'dashboard.min-score' | translate}}
                </th>
                <th scope="col" style="width: 100px;">{{'dashboard.result' | translate}}</th>
            </tr>
        </thead>
        <tbody class="datatable-body" *ngIf="tests.length">
            <tr *ngFor="let test of tests">
                <td>
                    <span class="colored d-block mb-0">
                        <b>{{ test.programmedTime | date: 'dd/MM/yyyy, HH:mm'}}</b>
                    </span>
                </td>
                <td>{{ test.testTemplateName }}</td>
                <td>{{'statuses.' + enum[test.testStatus] | translate}}</td>
                <td>
                    <p *ngIf="test.result == resultEnum.NoResult"> - / {{test.minPercent}}%</p>
                    <p *ngIf="test.result != resultEnum.NoResult">{{ test.accumulatedPercentage }}% / {{test.minPercent}}%</p>
                </td>
                <td>{{'statuses.' + resultEnum[test.result] | translate}}</td>
            </tr>
        </tbody>
        <tbody class="datatable-body" *ngIf="!tests.length">
            <tr>
                <td colspan="6" class="text-center">
                    {{ 'message.no-record' | translate }}
                </td>
            </tr>
        </tbody>
    </table>
    <div pagination class="datatable-pager datatable-paging-loaded" [page]="pagedSummary.currentPage"
        *ngIf="tests.length" [total]="pagedSummary.totalPages" [totalRecords]="pagedSummary.totalCount"
        [size]="pagedSummary.pageSize" (sizeChange)="getTests({ page: 1, itemsPerPage: $event })"
        (pageChange)="getTests({ page: $event, itemsPerPage: pagedSummary.pageSize })">
    </div>
</div>