<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
    <nav class="topbar navbar navbar-expand-lg navbar-dark bg-dark p-0">
        <div class="container-fluid">
            <div class="d-flex pt-2 pb-2">
                <img src="../../../assets/MAI_Sign.png" alt="..." class="mr-5" style="max-height: 40px;">
                <img src="../../../assets/logo_2.png" alt="..." class="img-thumbnail" style="max-height: 40px;">
            </div>
            <div class=" d-flex justify-content-end" id="navbarSupportedContent">
                <div class="topbar">
                    <div ngbDropdown #languageDropdown="ngbDropdown" class="dropdown">
                        <div class="topbar-item mr-4" data-toggle="dropdown" data-offset="10px,0px"
                            aria-expanded="false">
                            <div ngbDropdownToggle id="languageDropdown" class="btn btn-light-primary px-3">
                                {{ getLang() }}
                            </div>
                        </div>
                        <div ngbDropdownMenu aria-labelledby="languageDropdown"
                            class="dropdown-menu p-0 m-0 dropdown-menu-left dropdown-menu-anim-up">
                            <ul class="navi navi-hover py-3">
                                <li class="navi-item">
                                    <a href="javascript:;" (click)="useLanguage('ro'); languageDropdown.close()"
                                        class="navi-link text-decoration-none">
                                        <span class="navi-text">Română</span>
                                    </a>
                                </li>
                                <li class="navi-item">
                                    <a href="javascript:;" (click)="useLanguage('en'); languageDropdown.close()"
                                        class="navi-link text-decoration-none">
                                        <span class="navi-text">English</span>
                                    </a>
                                </li>
                                <li class="navi-item">
                                    <a href="javascript:;" (click)="useLanguage('ru'); languageDropdown.close()"
                                        class="navi-link text-decoration-none">
                                        <span class="navi-text">Русский</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="topbar-item" style="white-space: nowrap; font-size: 14px; font-weight: 500">
                        <button type="button" class="btn btn-primary btn-lg"
                            style="padding-left: 2.5rem; padding-right: 2.5rem;" [routerLink]="['../']">{{
                            'login.login'| translate }}</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <div class="container-fluid" style="background-color: #eff1f3; height: 100%;">
        <div class="container h-100">
            <div class="row h-100 justify-content-center">
                <div class="row w-100">
                    <div class="col-md-6 m-auto">
                        <div class="text-center">
                            <div class="card">
                                <div class="card-header">
                                    <h5
                                        *ngIf="!isLoading && isMain && !isProfileOverview && !isEmailVerification && !isResetedPassword">
                                        {{ 'reset-pass.card-header-main' | translate }}
                                    </h5>
                                    <h5
                                        *ngIf="!isLoading && !isMain && isProfileOverview && !isEmailVerification && !isResetedPassword">
                                        {{ 'reset-pass.card-header-profile-overview' | translate }}
                                    </h5>
                                    <h5
                                        *ngIf="!isLoading && !isMain && !isProfileOverview && isEmailVerification && !isResetedPassword">
                                        {{ 'reset-pass.card-header-email-verification' | translate }}
                                    </h5>
                                </div>
                                <app-loading-spinner [contentHeight]="'20rem'" [height]="'5rem'" [width]="'5rem'"
                                    [colorClass]="'text-primary'" *ngIf="isLoading">
                                </app-loading-spinner>
                                <div class="card-body"
                                    *ngIf="!isLoading && isMain && !isProfileOverview && !isEmailVerification && !isResetedPassword">
                                    <h5 class="card-title m-4">
                                        {{ 'reset-pass.card-body-main' | translate }}
                                    </h5>
                                    <div class="m-4">
                                        <form [formGroup]="userForm">
                                            <div class="input-group mb-2">
                                                <div class="input-group-prepend">
                                                    <div class="input-group-text">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                            fill="currentColor" class="bi bi-envelope"
                                                            viewBox="0 0 16 16">
                                                            <path
                                                                d="M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2Zm13 2.383-4.708 2.825L15 11.105V5.383Zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.741ZM1 11.105l4.708-2.897L1 5.383v5.722Z" />
                                                        </svg>
                                                    </div>
                                                </div>
                                                <input type="text"
                                                    class="form-control form-control-lg form-control-solid" name="email"
                                                    type="text" formControlName="email"
                                                    [placeholder]="'reset-pass.card-body-main-email' | translate"
                                                    [(ngModel)]="email">
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <div class="card-body"
                                    *ngIf="!isLoading && !isMain && isProfileOverview && !isEmailVerification && !isResetedPassword">
                                    <div class="m-4">
                                        <h5>{{ 'reset-pass.card-body-profile-overview' | translate }}</h5>
                                        <div class="card mb-4">
                                            <div class="card-body text-center">
                                                <img *ngIf="!userDetails.mediaFileId"
                                                    src="../../../assets/user-default.png" alt="avatar"
                                                    class="rounded-circle img-fluid" style="width: 150px;">
                                                <app-get-media-file class="rounded-circle img-fluid"
                                                    *ngIf="userDetails.mediaFileId" [fileId]="userDetails.mediaFileId">
                                                </app-get-media-file>
                                                <h5 class="my-3">{{userDetails.firstName}} {{ userDetails.lastName }} {{ userDetails.fatherName}}
                                                </h5>
                                                <p class="text-muted mb-1">{{ userDetails.phoneNumber }}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body"
                                    *ngIf="!isLoading && !isMain && !isProfileOverview && isEmailVerification && !isResetedPassword">
                                    <div class="m-4">
                                        <h5>{{ 'reset-pass.card-body-email-verification' | translate }}</h5>
                                        <div class="card m-4">
                                            <div class="form-group row m-3">
                                                <div class="col-lg-5 col-xl-5 col-form-label">
                                                    <div>
                                                        {{ 'reset-pass.card-body-email-verification-send-code' | translate }}
                                                    </div>
                                                    <div>
                                                        {{userDetails.email}}
                                                    </div>
                                                </div>
                                                <div
                                                    class="col-xl-7 col-lg-7 col-form-label text-right font-weight-bold text-muted">
                                                    <input class="form-control form-control-lg form-control-solid"
                                                        name="code" maxlength="4" minlength="4" autocomplete="off"
                                                        type="text" [(ngModel)]="code"
                                                        [placeholder]="'reset-pass.card-body-email-verification-code' | translate" />
                                                    <a class="pe-auto mt-2" style="cursor: pointer;"
                                                        (click)="emailVerification()"> {{
                                                        'reset-pass.card-body-email-verification-resend-code' | translate }}</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body"
                                    *ngIf="!isLoading && !isMain && !isProfileOverview && !isEmailVerification && isResetedPassword">
                                    <div class="m-4">
                                        <h5>{{ 'reset-pass.card-body-reseted-password' | translate }}</h5>
                                    </div>
                                </div>
                                <div class="card-footer text-right"
                                    *ngIf="!isLoading && isMain && !isProfileOverview && !isEmailVerification && !isResetedPassword">
                                    <button type="button" class="btn btn-light mr-2" [routerLink]="['../']">{{
                                        'reset-pass.card-footer-main.button-cancel' | translate }}</button>
                                    <button type="button" class="btn btn-primary" [disabled]="userForm.invalid"
                                        (click)="getUser()">{{ 'reset-pass.card-footer-main.button-next' | translate
                                        }}</button>
                                </div>
                                <div class="card-footer text-right"
                                    *ngIf="!isLoading && !isMain && isProfileOverview && !isEmailVerification && !isResetedPassword">
                                    <button type="button" class="btn btn-light mr-2" (click)="reloadPage()">{{
                                        'reset-pass.card-footer-profile-overview.button-cancel' | translate }}</button>
                                    <button type="button" class="btn btn-primary" (click)="emailVerification()">{{
                                        'reset-pass.card-footer-profile-overview.button-next' | translate }}</button>
                                </div>
                                <div class="card-footer text-right"
                                    *ngIf="!isLoading && !isMain && !isProfileOverview && isEmailVerification && !isResetedPassword">
                                    <button type="button" class="btn btn-light mr-2" (click)="reloadPage()">{{
                                        'reset-pass.card-footer-email-verification.button-cancel' | translate
                                        }}</button>
                                    <button type="button" class="btn btn-primary" [disabled]="ckeckCode(code) "
                                        (click)="resetPassword()">{{
                                        'reset-pass.card-footer-email-verification.button-next' | translate }}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="d-none d-md-block footer container-fluid bg-dark navbar-dark py-2">
        <p class="text-center text-muted mt-1">&copy; Company, Inc</p>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
</body>

</html>