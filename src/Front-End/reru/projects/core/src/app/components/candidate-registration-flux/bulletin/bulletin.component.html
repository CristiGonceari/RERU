<app-loading-spinner *ngIf="isLoading" contentHeight="20rem" height="5rem" width="5rem" colorClass="text-primary"></app-loading-spinner>
<form *ngIf="bulletinForm && !isLoading" class="col-lg col-md-12 col-sm-12 col-12 mx-auto" [formGroup]="bulletinForm">
    <div class="row my-5">
        <div class="col">
            <h4>{{'step.Bulletin' | translate}}</h4>
        </div>
    </div>
    <div class="row mb-10">
        <div class="col-sm-12">
          <div class="card">
            <div class="card-body">
              <app-loading-spinner *ngIf="bulletinValuesLoading" contentHeight="20rem" height="5rem" width="5rem"
                colorClass="text-primary"></app-loading-spinner>
                <div class="container p-lg-2 p-0" *ngIf="!bulletinValuesLoading">
                    <div class="row">
                      <div class="col">
                        <div class="form-group row align-items-center mb-2">
                          <label class="col-xl-3 col-lg-3 col-auto col-form-label font-weight-bold text-left text-lg-left text-muted">
                            {{'table.idnp' | translate}}:
                          </label>
                          <div class="col-xl-6 col-lg-9 col">
                            <p class="font-size-lg m-0 bulletinIdnp">{{bulletinIdnp}}</p>
                          </div>
                        </div>
                      </div>
                      </div>
                      </div>
                </div>
                </div>
                </div>
            </div>
    <div class="ml-lg-10 mr-lg-10 m-0">
    <div class="form-group row required">
        <label class="col-xl-3 col-lg-3 col-form-label d-flex align-items-center">
            <span class="svg-icon  svg-icon-2x mr-2"><!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo5/dist/../src/media/svg/icons/Shopping/Barcode-scan.svg--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <rect x="0" y="0" width="24" height="24"/>
                    <path d="M15,9 L13,9 L13,5 L15,5 L15,9 Z M15,15 L15,20 L13,20 L13,15 L15,15 Z M5,9 L2,9 L2,6 C2,5.44771525 2.44771525,5 3,5 L5,5 L5,9 Z M5,15 L5,20 L3,20 C2.44771525,20 2,19.5522847 2,19 L2,15 L5,15 Z M18,9 L16,9 L16,5 L18,5 L18,9 Z M18,15 L18,20 L16,20 L16,15 L18,15 Z M22,9 L20,9 L20,5 L21,5 C21.5522847,5 22,5.44771525 22,6 L22,9 Z M22,15 L22,19 C22,19.5522847 21.5522847,20 21,20 L20,20 L20,15 L22,15 Z" fill="#000000"/>
                    <path d="M9,9 L7,9 L7,5 L9,5 L9,9 Z M9,15 L9,20 L7,20 L7,15 L9,15 Z" fill="#000000" opacity="0.3"/>
                    <rect fill="#000000" opacity="0.3" x="0" y="11" width="24" height="2" rx="1"/>
                </g>
            </svg><!--end::Svg Icon--></span>
            {{'bulletin.series' | translate}}</label>
            <div class="col-lg-9 col-xl-9">
                <input formControlName="series"
                       autocomplete="off"
                       class="form-control form-control-solid" 
                       type="text" 
                       [ngClass]="inputValidator(bulletinForm, 'series')"
                       [placeholder]="'bulletin.series' | translate"/>
                <div *ngIf="isInvalidPattern('series')" class="invalid-feedback d-block">{{'validations.only-letters-numbers-dash-and-dot' | translate}}</div>
        </div>
    </div>
    <div class="form-group row required">
        <label class="col-xl-3 col-lg-3 col-form-label d-flex align-items-center">
            <span class="svg-icon  svg-icon-2x mr-2"><!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo5/dist/../src/media/svg/icons/Home/Building.svg--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <rect x="0" y="0" width="24" height="24"/>
                    <path d="M13.5,21 L13.5,18 C13.5,17.4477153 13.0522847,17 12.5,17 L11.5,17 C10.9477153,17 10.5,17.4477153 10.5,18 L10.5,21 L5,21 L5,4 C5,2.8954305 5.8954305,2 7,2 L17,2 C18.1045695,2 19,2.8954305 19,4 L19,21 L13.5,21 Z M9,4 C8.44771525,4 8,4.44771525 8,5 L8,6 C8,6.55228475 8.44771525,7 9,7 L10,7 C10.5522847,7 11,6.55228475 11,6 L11,5 C11,4.44771525 10.5522847,4 10,4 L9,4 Z M14,4 C13.4477153,4 13,4.44771525 13,5 L13,6 C13,6.55228475 13.4477153,7 14,7 L15,7 C15.5522847,7 16,6.55228475 16,6 L16,5 C16,4.44771525 15.5522847,4 15,4 L14,4 Z M9,8 C8.44771525,8 8,8.44771525 8,9 L8,10 C8,10.5522847 8.44771525,11 9,11 L10,11 C10.5522847,11 11,10.5522847 11,10 L11,9 C11,8.44771525 10.5522847,8 10,8 L9,8 Z M9,12 C8.44771525,12 8,12.4477153 8,13 L8,14 C8,14.5522847 8.44771525,15 9,15 L10,15 C10.5522847,15 11,14.5522847 11,14 L11,13 C11,12.4477153 10.5522847,12 10,12 L9,12 Z M14,12 C13.4477153,12 13,12.4477153 13,13 L13,14 C13,14.5522847 13.4477153,15 14,15 L15,15 C15.5522847,15 16,14.5522847 16,14 L16,13 C16,12.4477153 15.5522847,12 15,12 L14,12 Z" fill="#000000"/>
                    <rect fill="#FFFFFF" x="13" y="8" width="3" height="3" rx="1"/>
                    <path d="M4,21 L20,21 C20.5522847,21 21,21.4477153 21,22 L21,22.4 C21,22.7313708 20.7313708,23 20.4,23 L3.6,23 C3.26862915,23 3,22.7313708 3,22.4 L3,22 C3,21.4477153 3.44771525,21 4,21 Z" fill="#000000" opacity="0.3"/>
                </g>
            </svg><!--end::Svg Icon--></span>
            {{'bulletin.emited-by' | translate}}</label>
            <div class="col-lg-9 col-xl-9">
                <input 
                    formControlName="emittedBy" autocomplete="off"  
                    class="form-control form-control-solid" type="text" 
                    [placeholder]="'bulletin.emited-by' | translate"
                    [ngClass]="inputValidator(bulletinForm, 'emittedBy')" />
                <div *ngIf="isInvalidPattern('emittedBy')" class="invalid-feedback d-block">{{'validations.only-letters-numbers-dash-and-dot' | translate}}</div>
        </div>
    </div>
    <div class="form-group row required">
        <label class="col-xl-3 col-lg-3 col-form-label d-flex align-items-center">
            <span class="svg-icon  svg-icon-2x mr-2"><!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo5/dist/../src/media/svg/icons/Home/Alarm-clock.svg--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <rect x="0" y="0" width="24" height="24"/>
                    <path d="M7.14319965,19.3575259 C7.67122143,19.7615175 8.25104409,20.1012165 8.87097532,20.3649307 L7.89205065,22.0604779 C7.61590828,22.5387706 7.00431787,22.7026457 6.52602525,22.4265033 C6.04773263,22.150361 5.88385747,21.5387706 6.15999985,21.0604779 L7.14319965,19.3575259 Z M15.1367085,20.3616573 C15.756345,20.0972995 16.3358198,19.7569961 16.8634386,19.3524415 L17.8320512,21.0301278 C18.1081936,21.5084204 17.9443184,22.1200108 17.4660258,22.3961532 C16.9877332,22.6722956 16.3761428,22.5084204 16.1000004,22.0301278 L15.1367085,20.3616573 Z" fill="#000000"/>
                    <path d="M12,21 C7.581722,21 4,17.418278 4,13 C4,8.581722 7.581722,5 12,5 C16.418278,5 20,8.581722 20,13 C20,17.418278 16.418278,21 12,21 Z M19.068812,3.25407593 L20.8181344,5.00339833 C21.4039208,5.58918477 21.4039208,6.53893224 20.8181344,7.12471868 C20.2323479,7.71050512 19.2826005,7.71050512 18.696814,7.12471868 L16.9474916,5.37539627 C16.3617052,4.78960984 16.3617052,3.83986237 16.9474916,3.25407593 C17.5332781,2.66828949 18.4830255,2.66828949 19.068812,3.25407593 Z M5.29862906,2.88207799 C5.8844155,2.29629155 6.83416297,2.29629155 7.41994941,2.88207799 C8.00573585,3.46786443 8.00573585,4.4176119 7.41994941,5.00339833 L5.29862906,7.12471868 C4.71284263,7.71050512 3.76309516,7.71050512 3.17730872,7.12471868 C2.59152228,6.53893224 2.59152228,5.58918477 3.17730872,5.00339833 L5.29862906,2.88207799 Z" fill="#000000" opacity="0.3"/>
                    <path d="M11.9630156,7.5 L12.0475062,7.5 C12.3043819,7.5 12.5194647,7.69464724 12.5450248,7.95024814 L13,12.5 L16.2480695,14.3560397 C16.403857,14.4450611 16.5,14.6107328 16.5,14.7901613 L16.5,15 C16.5,15.2109164 16.3290185,15.3818979 16.1181021,15.3818979 C16.0841582,15.3818979 16.0503659,15.3773725 16.0176181,15.3684413 L11.3986612,14.1087258 C11.1672824,14.0456225 11.0132986,13.8271186 11.0316926,13.5879956 L11.4644883,7.96165175 C11.4845267,7.70115317 11.7017474,7.5 11.9630156,7.5 Z" fill="#000000"/>
                </g>
            </svg><!--end::Svg Icon--></span>
            {{'bulletin.relase-day' | translate}}</label>
            <div class="col-lg-9 col-xl-9">
                <app-stepper-date-time [parent]="bulletinForm" [date]="'releaseDay'" [placeholder]="'bulletin.relase-day' | translate"></app-stepper-date-time>
        </div>
    </div>
    </div>
    <div class="row mb-5">
        <div class="col">
            <h4>{{'bulletin.adresses' | translate}}</h4>
        </div>
    </div>
    <div class="mx-lg-10 m-0">
    <div class="form-group row required">
        <label class="col-xl-3 col-lg-3 col-form-label">{{'bulletin.birth-place' | translate}}</label>
            <div class="col-lg-9 col-xl-9">
                <input readonly autocomplete="off" [value]="renderBirthPlace()" [ngClass]="addressValidation(bulletinForm.value.birthPlace)"  (click)="openBulletinAddressModal('birthPlace', true)" class="form-control form-control-solid pointer" type="text" [placeholder]="'personal.insert-birth-place' | translate"/>
        </div>
    </div>
    <div class="form-group row required">
        <label class="col-xl-3 col-lg-3 col-form-label">{{'bulletin.residence-address' | translate}}</label>
            <div class="col-lg-9 col-xl-9">
            <input readonly autocomplete="off" [value]="renderResidenceAddress()"  [ngClass]="addressValidation(bulletinForm.value.residenceAddress)" (click)="openBulletinAddressModal('residenceAddress', false)" class="form-control form-control-solid pointer" type="text" [placeholder]="'personal.insert-living-address' | translate"/>
        </div>
    </div>
    <div class="form-group row required">
        <label class="col-xl-3 col-lg-3 col-form-label">{{'bulletin.parents-residence-address' | translate}}</label>
            <div class="col-lg-9 col-xl-9">
            <input readonly autocomplete="off" [value]="renderParentResidenceAddress()"  [ngClass]="addressValidation(bulletinForm.value.parentsResidenceAddress)" (click)="openBulletinAddressModal('parentsResidenceAddress', false)" class="form-control form-control-solid pointer" type="text" [placeholder]="'personal.insert-residence-address' | translate"/>
        </div>
    </div>
    </div>
    <div class="row mx-lg-10 m-0">
        <div class="col">
            <div class="row d-flex justify-content-md-end">
                <app-stepper-arrow-hint class="d-md-block d-none" *ngIf="bulletinForm && bulletinForm.valid" [description]="'stepper.button-next-hint' | translate"></app-stepper-arrow-hint>
                <app-stepper-arrow-hint-down  class="d-md-none d-block" *ngIf="bulletinForm && bulletinForm.valid" [description]="'stepper.button-next-hint' | translate"></app-stepper-arrow-hint-down >
                <button class="d-md-block d-none btn btn-success h-35px" matStepperNext
                    [disabled]="bulletinForm && bulletinForm.invalid" *ngIf="toAddOrUpdateButton"
                    (click)="updateBulletin()">{{'stepper.button-update-and-next' | translate}}</button>
                <button class="d-md-block d-none btn btn-success h-35px" matStepperNext
                    [disabled]="bulletinForm && bulletinForm.invalid" *ngIf="!toAddOrUpdateButton"
                    (click)="createBulletin()">{{'stepper.button-save-and-next' | translate}}</button>
                <button class="d-md-none d-block btn btn-success h-45px" matStepperNext
                    [disabled]="bulletinForm && bulletinForm.invalid" *ngIf="toAddOrUpdateButton"
                    (click)="updateBulletin()">{{'stepper.button-update-and-next' | translate}}</button>
                <button class="d-md-none d-block btn btn-success h-45px" matStepperNext
                    [disabled]="bulletinForm && bulletinForm.invalid" *ngIf="!toAddOrUpdateButton"
                    (click)="createBulletin()">{{'stepper.button-save-and-next' | translate}}</button>
            </div>
        </div>
    </div>
</form>
