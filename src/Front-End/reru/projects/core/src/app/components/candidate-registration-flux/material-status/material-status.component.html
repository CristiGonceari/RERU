<div class="d-flex flex-column">
    <mat-accordion class="gutter-b">
        <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <div class="row">
                        <div class="col">
                            <h4 class="d-sm-block d-none">{{'step.MaterialStatus' | translate}}</h4>
                            <h4 class="d-sm-none d-block font-size-small">{{'step.MaterialStatus' | translate}}</h4>
                        </div>
                    </div>
                </mat-panel-title>
                <mat-panel-description class="align-items-center justify-content-end font-weight-bold text-danger">
                    {{ 'step-obligation.obligatory' | translate }}
                </mat-panel-description>
            </mat-expansion-panel-header>
            <form *ngIf="materialStatusForm" class="col-xl mb-md-3 mb-0" [formGroup]="materialStatusForm">
                <app-loading-spinner *ngIf="isLoadingMaterialStatus" contentHeight="20rem" height="5rem" width="5rem"
                    colorClass="text-primary"></app-loading-spinner>
                <div *ngIf="!isLoadingMaterialStatus">
                    <div class="row mt-lg-10 mt-0">
                        <app-stepper-arrow-hint class="col"
                            *ngIf="materialStatusForm.value.materialStatusTypeId == null || materialStatusForm.value.materialStatusTypeId == 'null'"
                            [description]="'stepper.select-value' | translate"></app-stepper-arrow-hint>
                        <div class="col-xl-7 col-12 mx-auto">
                            <div class="form-group row required">
                                <label class="col-auto col-form-label"
                                    for="materialStatusTypeId">{{'material-status.name' | translate}}</label>
                                <div class="col-lg-4 col-12">
                                    <select class="form-control" formControlName="materialStatusTypeId">
                                        <option value="null">{{'module-access.select' | translate}}</option>
                                        <option *ngFor="let item of materialStatusTypes" [value]="item.value">{{
                                            'materialStatusType.' + item.translateId | translate}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="d-flex justify-content-end mb-3">
                                <app-stepper-arrow-hint
                                    *ngIf="materialStatusForm.value.materialStatusTypeId != null && userMaterialStatus == null"
                                    [description]="'material-status.add-button-hint' | translate"></app-stepper-arrow-hint>
                                <button class="btn btn-outline-success" *ngIf="addOrEditMaterialStatusButton"
                                    [disabled]="(materialStatusForm.value.materialStatusTypeId == null) || (materialStatusForm.value.materialStatusTypeId == 'null')"
                                    (click)="updateMaterialStatus()">{{'stepper.button-update' | translate}}</button>
                                <button class="btn btn-outline-success" *ngIf="!addOrEditMaterialStatusButton"
                                    [disabled]="materialStatusForm.value.materialStatusTypeId == null || (materialStatusForm.value.materialStatusTypeId == 'null')"
                                    (click)="createMaterialStatus()">{{'stepper.button-add' | translate}}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </mat-expansion-panel>
    </mat-accordion>
    <mat-accordion class="gutter-b">
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <h4 class="d-sm-block d-none">{{'material-status.kinship-relation' | translate}}</h4>
                    <h4 class="d-sm-none d-block font-size-small">{{'material-status.kinship-relation' | translate}}
                    </h4>
                </mat-panel-title>
                <mat-panel-description class="align-items-center justify-content-end">
                    {{ 'step-obligation.optional' | translate }}
                </mat-panel-description>
            </mat-expansion-panel-header>
            <form *ngIf="kinshipRelationWithUserProfileForm" class="col mb-md-3 mb-0"
                [formGroup]="kinshipRelationWithUserProfileForm">
                <app-loading-spinner *ngIf="isLoadingKinshipRelationWithUserProfile" contentHeight="20rem" height="5rem"
                    width="5rem" colorClass="text-primary"></app-loading-spinner>
                <div *ngIf="!isLoadingKinshipRelationWithUserProfile">
                    <div formArrayName="relationWithUserProfile">
                        <div class="d-lg-none d-flex flex-column gap-4">
                            <div class="row"
                                [ngClass]="{'more': kinshipRelationWithUserProfileForm.controls.relationWithUserProfile.controls.length > 1  &&
                                (kinshipRelationWithUserProfileForm.controls.relationWithUserProfile.controls.length - 1) !== i}"
                                *ngFor="let relation of kinshipRelationWithUserProfileForm.controls.relationWithUserProfile.controls; let i = index"
                                [formGroupName]="i">
                                <div class="col d-flex flex-column gap-4">
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{'table.number' | translate}}</p>
                                        </div>
                                        <div class="col">
                                            <p class="font-weight-bolder text-center">{{i + 1}}</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{ 'material-status.kinship-degree' | translate}}</p>
                                        </div>
                                        <div class="col-12">
                                            <select class="form-control" formControlName="kinshipDegree"
                                                [ngClass]="inputValidator(relation, 'kinshipDegree')">
                                                <option value="null">{{'module-access.select' | translate}}</option>
                                                <option *ngFor="let item of kinshipDegreeEnum" [value]="item.value">{{
                                                    'kinshipDegree.' + item.label | translate}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{ 'material-status.user-name' | translate}}
                                            </p>
                                        </div>
                                        <div class="col-12">
                                            <input formControlName="name" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.user-name' | translate"
                                                [ngClass]="inputValidator(relation, 'name')" />
                                            <div *ngIf="isInvalidPattern(relation, 'name')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-and-dash' | translate}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{ 'material-status.last-name' | translate}}
                                            </p>
                                        </div>
                                        <div class="col-12">
                                            <input formControlName="lastName" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.last-name' | translate"
                                                [ngClass]="inputValidator(relation, 'lastName')" />
                                            <div *ngIf="isInvalidPattern(relation, 'lastName')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-and-dash' | translate}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{ 'material-status.table-function' | translate}}</p>
                                        </div>
                                        <div class="col-12">
                                            <input formControlName="function" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.table-function' | translate"
                                                [ngClass]="inputValidator(relation, 'function')" />
                                            <div *ngIf="isInvalidPattern(relation, 'function')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{ 'material-status.table-subdivision' | translate}}</p>
                                        </div>
                                        <div class="col-12">
                                            <input formControlName="subdivision" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.table-subdivision' | translate"
                                                [ngClass]="inputValidator(relation, 'subdivision')" />
                                            <div *ngIf="isInvalidPattern(relation, 'subdivision')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" *ngIf="i > 0">
                                        <div class="col">
                                            <button class="btn btn-icon float-right"
                                                (click)="removeKinshipRelationWithUserProfile(i)">
                                                <span class="font-size-h2">&times;</span>
                                            </button>
                                        </div>
                                    </div>

                                    <div *ngIf="kinshipRelationWithUserProfileForm.controls.relationWithUserProfile.controls.length > 1"
                                        class="separator separator-dashed"></div>
                                </div>
                            </div>
                        </div>
                        <div class="table-responsive d-lg-block d-none">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th scope="col">{{ 'table.number' | translate }}</th>
                                        <th scope="col">{{ 'material-status.kinship-degree' | translate }}</th>
                                        <th scope="col">{{ 'material-status.user-name' | translate}}</th>
                                        <th scope="col">{{ 'material-status.last-name' |translate }}</th>
                                        <th scope="col">{{ 'material-status.table-function' | translate}} </th>
                                        <th scope="col">{{ 'material-status.table-subdivision' | translate }}</th>
                                        <th scope="col"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr [ngClass]="{'more': kinshipRelationWithUserProfileForm.controls.relationWithUserProfile.controls.length > 1  &&
                                                (kinshipRelationWithUserProfileForm.controls.relationWithUserProfile.controls.length - 1) !== i}"
                                        *ngFor="let relation of kinshipRelationWithUserProfileForm.controls.relationWithUserProfile.controls; let i = index"
                                        [formGroupName]="i">
                                        <th scope="row">{{i + 1}}</th>
                                        <td>
                                            <select class="form-control" formControlName="kinshipDegree"
                                                [ngClass]="inputValidator(relation, 'kinshipDegree')">
                                                <option value="null">{{'module-access.select' | translate}}</option>
                                                <option *ngFor="let item of kinshipDegreeEnum" [value]="item.value">{{
                                                    'kinshipDegree.' + item.label | translate}}
                                                </option>
                                            </select>
                                        </td>
                                        <td>
                                            <input formControlName="name" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.user-name' | translate"
                                                [ngClass]="inputValidator(relation, 'name')" />
                                            <div *ngIf="isInvalidPattern(relation, 'name')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-and-dash' | translate}}
                                            </div>
                                        </td>
                                        <td>
                                            <input formControlName="lastName" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.last-name' | translate"
                                                [ngClass]="inputValidator(relation, 'lastName')" />
                                            <div *ngIf="isInvalidPattern(relation, 'lastName')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-and-dash' | translate}}
                                            </div>
                                        </td>
                                        <td>
                                            <input formControlName="function" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.table-function' | translate"
                                                [ngClass]="inputValidator(relation, 'function')" />
                                            <div *ngIf="isInvalidPattern(relation, 'function')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </td>
                                        <td>
                                            <input formControlName="subdivision" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.table-subdivision' | translate"
                                                [ngClass]="inputValidator(relation, 'function')" />
                                            <div *ngIf="isInvalidPattern(relation, 'function')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </td>
                                        <td *ngIf="i > 0">
                                            <div class="row justify-content-end mb-3 mr-7">
                                                <button class="btn btn-icon"
                                                    (click)="removeKinshipRelationWithUserProfile(i)">
                                                    <span class="font-size-h2">&times;</span>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row pt-4">
                        <div class="col">
                            <div class="d-flex justify-content-between">
                                <button class="btn btn-icon w-auto" (click)="addKinshipRelationWithUserProfile()"><span
                                        class="m-5">+ {{ 'material-status.add-material-status' | translate }}</span></button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="d-flex justify-content-end my-3">
                                <button class="btn btn-success h-35px"
                                    *ngIf="addOrEditKinshipRelationWithUserProfileButton"
                                    [disabled]="kinshipRelationWithUserProfileForm && kinshipRelationWithUserProfileForm.invalid "
                                    (click)="creteKinshipRelationWithUserProfile()">{{'stepper.button-update' | translate}}</button>
                                <button class="btn btn-outline-success h-35px"
                                    *ngIf="!addOrEditKinshipRelationWithUserProfileButton"
                                    [disabled]="kinshipRelationWithUserProfileForm && kinshipRelationWithUserProfileForm.invalid"
                                    (click)="creteKinshipRelationWithUserProfile()">{{'stepper.button-add' | translate}}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </mat-expansion-panel>
    </mat-accordion>
    <mat-accordion class="gutter-b">
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <div class="row">
                        <div class="col">
                            <h4 class="d-sm-block d-none">{{'material-status.biography-data' | translate}}</h4>
                            <h4 class="d-sm-none d-block font-size-small">{{'material-status.biography-data' | translate}}</h4>
                        </div>
                    </div>
                </mat-panel-title>
                <mat-panel-description class="align-items-center justify-content-end">
                    {{ 'step-obligation.optional' | translate }}
                </mat-panel-description>
            </mat-expansion-panel-header>
            <form *ngIf="kinshipRelationForm" class="col mb-md-3 mb-0" [formGroup]="kinshipRelationForm">
                <app-loading-spinner *ngIf="isLoadingKinshipRelation" contentHeight="20rem" height="5rem" width="5rem"
                    colorClass="text-primary"></app-loading-spinner>
                <div *ngIf="!isLoadingKinshipRelation">
                    <div formArrayName="relation">

                        <div class="d-lg-none d-flex flex-column gap-2">
                            <div class="row" [ngClass]="{'more': kinshipRelationForm.controls.relation.controls.length > 1  &&
                                        (kinshipRelationForm.controls.relation.controls.length - 1) !== i}"
                                *ngFor="let relation of kinshipRelationForm.controls.relation.controls; let i = index"
                                [formGroupName]="i">
                                <div class="col d-flex flex-column gap-4">
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{'table.number' | translate}}</p>
                                        </div>
                                        <div class="col">
                                            <p class="font-weight-bolder text-center">{{i + 1}}</p>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{ 'material-status.kinship-degree' | translate }}</p>
                                        </div>
                                        <div class="col-12">
                                            <select class="form-control" formControlName="kinshipDegree"
                                                [ngClass]="inputValidator(relation, 'kinshipDegree')">
                                                <option value="null">{{'module-access.select' | translate}}</option>
                                                <option *ngFor="let item of kinshipDegreeEnum" [value]="item.value">{{
                                                    'kinshipDegree.' + item.label | translate}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{'material-status.user-name' | translate}}
                                            </p>
                                        </div>
                                        <div class="col-12">
                                            <input formControlName="name" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.user-name' | translate"
                                                [ngClass]="inputValidator(relation, 'name')" />
                                            <div *ngIf="isInvalidPattern(relation, 'name')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-and-dash' | translate}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{'material-status.last-name' | translate}}
                                            </p>
                                        </div>
                                        <div class="col-12">
                                            <input formControlName="lastName" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.last-name' | translate"
                                                [ngClass]="inputValidator(relation, 'lastName')" />
                                            <div *ngIf="isInvalidPattern(relation, 'lastName')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-and-dash' | translate}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{ 'material-status.birthday-date' | translate}}</p>
                                        </div>
                                        <div class="col-12">
                                            <app-stepper-date-time [parent]="relation" [date]="'birthDate'"
                                                [placeholder]="'material-status.birthday-date' | translate"></app-stepper-date-time>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{'material-status.birth-place' | translate}}
                                            </p>
                                        </div>
                                        <div class="col-12">
                                            <input formControlName="birthLocation" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.birth-place' | translate"
                                                [ngClass]="inputValidator(relation, 'birthLocation')" />
                                            <div *ngIf="isInvalidPattern(relation, 'birthLocation')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{ 'material-status.table-function' | translate }}</p>
                                        </div>
                                        <div class="col-12">
                                            <input formControlName="function" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.table-function' | translate"
                                                [ngClass]="inputValidator(relation, 'function')" />
                                            <div *ngIf="isInvalidPattern(relation, 'function')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{ 'material-status.work-place' | translate}}
                                            </p>
                                        </div>
                                        <div class="col-12">
                                            <input formControlName="workLocation" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.work-place' | translate"
                                                [ngClass]="inputValidator(relation, 'workLocation')" />
                                            <div *ngIf="isInvalidPattern(relation, 'workLocation')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col">
                                            <p class="font-weight-bolder">{{ 'material-status.residence' | translate}}
                                            </p>
                                        </div>
                                        <div class="col-12">
                                            <input formControlName="residenceAddress" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.residence' | translate"
                                                [ngClass]="inputValidator(relation, 'residenceAddress')" />
                                            <div *ngIf="isInvalidPattern(relation, 'residenceAddress')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" *ngIf="i > 0">
                                        <div class="col">
                                            <button class="btn btn-icon float-right" (click)="removeKinshipRelation(i)">
                                                <span class="font-size-h2">&times;</span>
                                            </button>
                                        </div>
                                    </div>

                                    <div *ngIf="kinshipRelationForm.controls.relation.controls.length > 1"
                                        class="separator separator-dashed"></div>
                                </div>
                            </div>
                        </div>

                        <div class="table-responsive d-lg-block d-none">
                            <table class="table table-bordered border-dark" [ngClass]="{'more': kinshipRelationForm.controls.relation.controls.length > 1  &&
                        (kinshipRelationForm.controls.relation.controls.length - 1) !== i}"
                                *ngFor="let relation of kinshipRelationForm.controls.relation.controls; let i = index"
                                [formGroupName]="i">
                                <tbody>
                                    <tr>
                                        <th>{{ 'table.number' | translate}}</th>
                                        <td>
                                            {{i + 1}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>{{ 'material-status.kinship-degree' | translate }} </th>
                                        <td>
                                            <select class="form-control" formControlName="kinshipDegree"
                                                [ngClass]="inputValidator(relation, 'kinshipDegree')">
                                                <option value="null">{{'module-access.select' | translate}}</option>
                                                <option *ngFor="let item of kinshipDegreeEnum" [value]="item.value">{{
                                                    'kinshipDegree.' + item.label | translate}}
                                                </option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>{{'material-status.user-name' | translate}}</th>
                                        <td>
                                            <input formControlName="name" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.user-name' | translate"
                                                [ngClass]="inputValidator(relation, 'name')" />
                                            <div *ngIf="isInvalidPattern(relation, 'name')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-and-dash' | translate}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>{{'material-status.last-name' | translate}}</th>
                                        <td>
                                            <input formControlName="lastName" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.last-name' | translate"
                                                [ngClass]="inputValidator(relation, 'lastName')" />
                                            <div *ngIf="isInvalidPattern(relation, 'lastName')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-and-dash' | translate}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>{{ 'material-status.birthday-date' | translate}}</th>
                                        <td>
                                            <app-stepper-date-time [parent]="relation" [date]="'birthDate'"
                                                [placeholder]="'material-status.birthday-date' | translate"></app-stepper-date-time>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>{{'material-status.birth-place' | translate}}</th>
                                        <td>
                                            <input formControlName="birthLocation" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.birth-place' | translate"
                                                [ngClass]="inputValidator(relation, 'birthLocation')" />
                                            <div *ngIf="isInvalidPattern(relation, 'birthLocation')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>{{ 'material-status.table-function' | translate }}</th>
                                        <td>
                                            <input formControlName="function" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.table-function' | translate"
                                                [ngClass]="inputValidator(relation, 'function')" />
                                            <div *ngIf="isInvalidPattern(relation, 'function')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>{{ 'material-status.work-place' | translate}}</th>
                                        <td>
                                            <input formControlName="workLocation" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.work-place' | translate"
                                                [ngClass]="inputValidator(relation, 'workLocation')" />
                                            <div *ngIf="isInvalidPattern(relation, 'workLocation')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>{{ 'material-status.residence' | translate}}</th>
                                        <td>
                                            <input formControlName="residenceAddress" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'material-status.residence' | translate"
                                                [ngClass]="inputValidator(relation, 'residenceAddress')" />
                                            <div *ngIf="isInvalidPattern(relation, 'residenceAddress')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-numbers-dash-and-dot' | translate}}
                                            </div>
                                        </td>
                                    </tr>
                                    <tr *ngIf="i > 0">
                                        <th></th>
                                        <td>
                                            <button class="btn btn-icon" (click)="removeKinshipRelation(i)">
                                                <span class="font-size-h2">&times;</span>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="d-flex justify-content-between">
                                <button class="btn btn-icon w-auto" (click)="addKinshipRelation()"><span
                                        class="m-5">+ {{ 'material-status.add-material-status-biographical-data' | translate }}</span></button>
                            </div>
                        </div>
                    </div>
                    <div class="row pt-4">
                        <div class="col">
                            <div class="d-flex justify-content-end my-3">
                                <button class="btn btn-success h-35px" *ngIf="addOrEditKinshipRelationButton"
                                    [disabled]="kinshipRelationForm && kinshipRelationForm.invalid "
                                    (click)="creteKinshipRelation()">{{'stepper.button-update' | translate}}</button>
                                <button class="btn btn-outline-success h-35px" *ngIf="!addOrEditKinshipRelationButton"
                                    [disabled]="kinshipRelationForm && kinshipRelationForm.invalid"
                                    (click)="creteKinshipRelation()">{{'stepper.button-add' | translate}}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </mat-expansion-panel>
    </mat-accordion>
    <mat-accordion class="gutter-b">
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <div class="row">
                        <div class="col">
                            <h4 class="d-sm-block d-none">{{'material-status.kinship-criminal-data-name' | translate}}
                            </h4>
                            <h4 class="d-sm-none d-block font-size-smaller">
                                {{'material-status.kinship-criminal-data-name' | translate}}</h4>
                        </div>
                    </div>
                </mat-panel-title>
                <mat-panel-description class="align-items-center justify-content-end">
                    {{ 'step-obligation.optional' | translate }}
                </mat-panel-description>
            </mat-expansion-panel-header>
            <form *ngIf="kinshipRelationCriminalDataForm" class="col mb-md-3 mb-0"
                [formGroup]="kinshipRelationCriminalDataForm">
                <app-loading-spinner *ngIf="isLoadingKinshipRelationCriminalData" contentHeight="20rem" height="5rem"
                    width="5rem" colorClass="text-primary"></app-loading-spinner>
                <div *ngIf="!isLoadingKinshipRelationCriminalData">
                    <div class="row mx-md-10 mx-0 mt-10">
                        <ckeditor [editor]="Editor" class="w-100" name="editor1" skin="moono-lisa" language="en"
                            formControlName="text" (ready)="onReady($event)"></ckeditor>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div class="d-flex justify-content-end mb-3">
                                <button class="btn btn-success h-35px"
                                    *ngIf="addOrEditKinshipRelationCriminalDataButton"
                                    [disabled]="kinshipRelationCriminalDataForm.value.text == null || kinshipRelationCriminalDataForm.value.text == '' "
                                    (click)="updateKinshipRelationCriminalData()">{{'stepper.button-update' | translate}}</button>
                                <button class="btn btn-outline-success h-35px"
                                    *ngIf="!addOrEditKinshipRelationCriminalDataButton"
                                    [disabled]="kinshipRelationCriminalDataForm.value.text == null || kinshipRelationCriminalDataForm.value.text == '' "
                                    (click)="createKinshipRelationCriminalData()">{{'stepper.button-add' | translate}}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </mat-expansion-panel>
    </mat-accordion>
    <div class="row">
        <div class="col">
            <div class="d-flex justify-content-end">
                <app-stepper-arrow-hint
                    *ngIf="!(materialStatusForm && materialStatusForm.invalid || userMaterialStatus == null)"
                    [description]="'stepper.button-next-hint' | translate"></app-stepper-arrow-hint>
                <button class="btn btn-success h-35px" matStepperNext
                    [disabled]="(materialStatusForm && materialStatusForm.invalid || userMaterialStatus == null)"
                    (click)="addRegistrationFluxStep()">{{'stepper.button-next' | translate}}</button>
            </div>
        </div>
    </div>
</div>