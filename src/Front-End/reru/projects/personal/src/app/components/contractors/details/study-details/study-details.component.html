<div class="card card-custom">
    <div class="card-header py-3">
        <div class="card-title align-items-start flex-column">
            <h3 class="card-label font-weight-bolder text-dark">
                {{'personal.studies' | translate}}
            </h3>
            <span class="text-muted font-weight-bold font-size-sm mt-1">
                {{'personal.change-your-account-details' | translate}}
            </span>
        </div>
        <div class="card-toolbar">
            <button class="btn btn-success" [disabled]="(studyForm && studyForm.invalid || userStudies == null)"
                (click)="addRegistrationFluxStep()">{{'stepper.button-next' | translate}}</button>
        </div>
    </div>
    <!-- <form *ngIf="!isLoading"  class="form" [formGroup]="studyForm">

      <div class="card-body">
        <div formArrayName="studies">
            <div class="box-square" 
            [ngClass]="{'more': studyForm.controls.studies.controls.length > 1  &&
                                (studyForm.controls.studies.controls.length - 1) !== i}" 
            *ngFor="let study of studyForm.controls.studies.controls;let i = index">
                <div [formGroupName]="i">
                    <div class="form-group row align-items-center">
                        <label class="col-xl-3 col-lg-3 col-form-label d-flex align-items-center">
                            <span class="svg-icon svg-icon-2x mr-2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <polygon points="0 0 24 0 24 24 0 24"/>
                                    <path d="M12,11 C9.790861,11 8,9.209139 8,7 C8,4.790861 9.790861,3 12,3 C14.209139,3 16,4.790861 16,7 C16,9.209139 14.209139,11 12,11 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"/>
                                    <path d="M3.00065168,20.1992055 C3.38825852,15.4265159 7.26191235,13 11.9833413,13 C16.7712164,13 20.7048837,15.2931929 20.9979143,20.2 C21.0095879,20.3954741 20.9979143,21 20.2466999,21 C16.541124,21 11.0347247,21 3.72750223,21 C3.47671215,21 2.97953825,20.45918 3.00065168,20.1992055 Z" fill="#000000" fill-rule="nonzero"/>
                                </g>
                            </svg></span>
                            {{'entity.study.student' | translate}}</label>
                        <div class="col-lg-9 col-xl-9">
                            <label class="checkbox checkbox-square">
                                <input class="form-control" type="checkbox" formControlName="isActiveStudy">
                                <span></span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-3 col-lg-3 col-form-label d-flex align-items-center">
                            <span class="svg-icon svg-icon-2x mr-2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24"/>
                                    <path d="M13.5,21 L13.5,18 C13.5,17.4477153 13.0522847,17 12.5,17 L11.5,17 C10.9477153,17 10.5,17.4477153 10.5,18 L10.5,21 L5,21 L5,4 C5,2.8954305 5.8954305,2 7,2 L17,2 C18.1045695,2 19,2.8954305 19,4 L19,21 L13.5,21 Z M9,4 C8.44771525,4 8,4.44771525 8,5 L8,6 C8,6.55228475 8.44771525,7 9,7 L10,7 C10.5522847,7 11,6.55228475 11,6 L11,5 C11,4.44771525 10.5522847,4 10,4 L9,4 Z M14,4 C13.4477153,4 13,4.44771525 13,5 L13,6 C13,6.55228475 13.4477153,7 14,7 L15,7 C15.5522847,7 16,6.55228475 16,6 L16,5 C16,4.44771525 15.5522847,4 15,4 L14,4 Z M9,8 C8.44771525,8 8,8.44771525 8,9 L8,10 C8,10.5522847 8.44771525,11 9,11 L10,11 C10.5522847,11 11,10.5522847 11,10 L11,9 C11,8.44771525 10.5522847,8 10,8 L9,8 Z M9,12 C8.44771525,12 8,12.4477153 8,13 L8,14 C8,14.5522847 8.44771525,15 9,15 L10,15 C10.5522847,15 11,14.5522847 11,14 L11,13 C11,12.4477153 10.5522847,12 10,12 L9,12 Z M14,12 C13.4477153,12 13,12.4477153 13,13 L13,14 C13,14.5522847 13.4477153,15 14,15 L15,15 C15.5522847,15 16,14.5522847 16,14 L16,13 C16,12.4477153 15.5522847,12 15,12 L14,12 Z" fill="#000000"/>
                                    <rect fill="#FFFFFF" x="13" y="8" width="3" height="3" rx="1"/>
                                    <path d="M4,21 L20,21 C20.5522847,21 21,21.4477153 21,22 L21,22.4 C21,22.7313708 20.7313708,23 20.4,23 L3.6,23 C3.26862915,23 3,22.7313708 3,22.4 L3,22 C3,21.4477153 3.44771525,21 4,21 Z" fill="#000000" opacity="0.3"/>
                                </g>
                            </svg></span>
                            {{'entity.study.institution' | translate}}</label>
                        <div class="col-lg-9 col-xl-9">
                            <input formControlName="institution" autocomplete="off"  class="form-control form-control-solid" type="text" 
                                    [placeholder]="'personal.insert-personal-last-name' | translate"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-3 col-lg-3 col-form-label d-flex align-items-center">
                            <span *ngIf="study?.get('studyFrequency')?.value === 0" class="svg-icon svg-icon-2x mr-2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <polygon points="0 0 24 0 24 24 0 24"/>
                                    <path d="M8,14 C8,11.790861 9.790861,10 12,10 C14.209139,10 16,11.790861 16,14 C16,14 8,14 8,14 Z" fill="#000000" fill-rule="nonzero"/>
                                    <path d="M19.5,11 L21,11 C21.8284271,11 22.5,11.6715729 22.5,12.5 C22.5,13.3284271 21.8284271,14 21,14 L19.5,14 C18.6715729,14 18,13.3284271 18,12.5 C18,11.6715729 18.6715729,11 19.5,11 Z M16.0606602,6.87132034 L17.1213203,5.81066017 C17.7071068,5.22487373 18.6568542,5.22487373 19.2426407,5.81066017 C19.8284271,6.39644661 19.8284271,7.34619408 19.2426407,7.93198052 L18.1819805,8.99264069 C17.5961941,9.57842712 16.6464466,9.57842712 16.0606602,8.99264069 C15.4748737,8.40685425 15.4748737,7.45710678 16.0606602,6.87132034 Z M3,11 L4.5,11 C5.32842712,11 6,11.6715729 6,12.5 C6,13.3284271 5.32842712,14 4.5,14 L3,14 C2.17157288,14 1.5,13.3284271 1.5,12.5 C1.5,11.6715729 2.17157288,11 3,11 Z M12,2.5 C12.8284271,2.5 13.5,3.17157288 13.5,4 L13.5,5.5 C13.5,6.32842712 12.8284271,7 12,7 C11.1715729,7 10.5,6.32842712 10.5,5.5 L10.5,4 C10.5,3.17157288 11.1715729,2.5 12,2.5 Z M4.81066017,5.81066017 C5.39644661,5.22487373 6.34619408,5.22487373 6.93198052,5.81066017 L7.99264069,6.87132034 C8.57842712,7.45710678 8.57842712,8.40685425 7.99264069,8.99264069 C7.40685425,9.57842712 6.45710678,9.57842712 5.87132034,8.99264069 L4.81066017,7.93198052 C4.22487373,7.34619408 4.22487373,6.39644661 4.81066017,5.81066017 Z M2.5,16 L21.5,16 C21.7761424,16 22,16.2238576 22,16.5 C22,16.7761424 21.7761424,17 21.5,17 L2.5,17 C2.22385763,17 2,16.7761424 2,16.5 C2,16.2238576 2.22385763,16 2.5,16 Z M2.5,18 L7.5,18 C7.77614237,18 8,18.2238576 8,18.5 C8,18.7761424 7.77614237,19 7.5,19 L2.5,19 C2.22385763,19 2,18.7761424 2,18.5 C2,18.2238576 2.22385763,18 2.5,18 Z M14.5,20 L21.5,20 C21.7761424,20 22,20.2238576 22,20.5 C22,20.7761424 21.7761424,21 21.5,21 L14.5,21 C14.2238576,21 14,20.7761424 14,20.5 C14,20.2238576 14.2238576,20 14.5,20 Z M9.5,18 L21.5,18 C21.7761424,18 22,18.2238576 22,18.5 C22,18.7761424 21.7761424,19 21.5,19 L9.5,19 C9.22385763,19 9,18.7761424 9,18.5 C9,18.2238576 9.22385763,18 9.5,18 Z M2.5,20 L12.5,20 C12.7761424,20 13,20.2238576 13,20.5 C13,20.7761424 12.7761424,21 12.5,21 L2.5,21 C2.22385763,21 2,20.7761424 2,20.5 C2,20.2238576 2.22385763,20 2.5,20 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"/>
                                </g>
                            </svg></span>
                            <span *ngIf="study?.get('studyFrequency')?.value === 1" class="svg-icon svg-icon-2x mr-2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <polygon points="0 0 24 0 24 24 0 24"/>
                                    <path d="M8,14 C8,11.790861 9.790861,10 12,10 C14.209139,10 16,11.790861 16,14 C16,14 8,14 8,14 Z" fill="#000000" fill-rule="nonzero"/>
                                    <path d="M19.5,11 L21,11 C21.8284271,11 22.5,11.6715729 22.5,12.5 C22.5,13.3284271 21.8284271,14 21,14 L19.5,14 C18.6715729,14 18,13.3284271 18,12.5 C18,11.6715729 18.6715729,11 19.5,11 Z M16.0606602,6.87132034 L17.1213203,5.81066017 C17.7071068,5.22487373 18.6568542,5.22487373 19.2426407,5.81066017 C19.8284271,6.39644661 19.8284271,7.34619408 19.2426407,7.93198052 L18.1819805,8.99264069 C17.5961941,9.57842712 16.6464466,9.57842712 16.0606602,8.99264069 C15.4748737,8.40685425 15.4748737,7.45710678 16.0606602,6.87132034 Z M3,11 L4.5,11 C5.32842712,11 6,11.6715729 6,12.5 C6,13.3284271 5.32842712,14 4.5,14 L3,14 C2.17157288,14 1.5,13.3284271 1.5,12.5 C1.5,11.6715729 2.17157288,11 3,11 Z M12,2.5 C12.8284271,2.5 13.5,3.17157288 13.5,4 L13.5,5.5 C13.5,6.32842712 12.8284271,7 12,7 C11.1715729,7 10.5,6.32842712 10.5,5.5 L10.5,4 C10.5,3.17157288 11.1715729,2.5 12,2.5 Z M4.81066017,5.81066017 C5.39644661,5.22487373 6.34619408,5.22487373 6.93198052,5.81066017 L7.99264069,6.87132034 C8.57842712,7.45710678 8.57842712,8.40685425 7.99264069,8.99264069 C7.40685425,9.57842712 6.45710678,9.57842712 5.87132034,8.99264069 L4.81066017,7.93198052 C4.22487373,7.34619408 4.22487373,6.39644661 4.81066017,5.81066017 Z M2.5,16 L21.5,16 C21.7761424,16 22,16.2238576 22,16.5 C22,16.7761424 21.7761424,17 21.5,17 L2.5,17 C2.22385763,17 2,16.7761424 2,16.5 C2,16.2238576 2.22385763,16 2.5,16 Z M2.5,18 L7.5,18 C7.77614237,18 8,18.2238576 8,18.5 C8,18.7761424 7.77614237,19 7.5,19 L2.5,19 C2.22385763,19 2,18.7761424 2,18.5 C2,18.2238576 2.22385763,18 2.5,18 Z M14.5,20 L21.5,20 C21.7761424,20 22,20.2238576 22,20.5 C22,20.7761424 21.7761424,21 21.5,21 L14.5,21 C14.2238576,21 14,20.7761424 14,20.5 C14,20.2238576 14.2238576,20 14.5,20 Z M9.5,18 L21.5,18 C21.7761424,18 22,18.2238576 22,18.5 C22,18.7761424 21.7761424,19 21.5,19 L9.5,19 C9.22385763,19 9,18.7761424 9,18.5 C9,18.2238576 9.22385763,18 9.5,18 Z M2.5,20 L12.5,20 C12.7761424,20 13,20.2238576 13,20.5 C13,20.7761424 12.7761424,21 12.5,21 L2.5,21 C2.22385763,21 2,20.7761424 2,20.5 C2,20.2238576 2.22385763,20 2.5,20 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"/>
                                </g>
                            </svg></span>
                            <span *ngIf="study?.get('studyFrequency')?.value == 2" class="svg-icon svg-icon-2x mr-2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <polygon points="0 0 24 0 24 24 0 24"/>
                                    <path d="M12.880982,3.00020666 C12.4130881,3.80913672 12.1452994,4.74829566 12.1452994,5.75 C12.1452994,8.77148908 14.5817362,11.2239178 17.5971169,11.2497933 C16.6461704,12.8938611 14.8686612,14 12.8327994,14 C9.7952333,14 7.33279942,11.5375661 7.33279942,8.5 C7.33279942,5.46243388 9.7952333,3 12.8327994,3 C12.8488765,3 12.8649374,3.00006898 12.880982,3.00020666 Z" fill="#000000"/>
                                    <path d="M2.5,16 L21.5,16 C21.7761424,16 22,16.2238576 22,16.5 C22,16.7761424 21.7761424,17 21.5,17 L2.5,17 C2.22385763,17 2,16.7761424 2,16.5 C2,16.2238576 2.22385763,16 2.5,16 Z M2.5,18 L7.5,18 C7.77614237,18 8,18.2238576 8,18.5 C8,18.7761424 7.77614237,19 7.5,19 L2.5,19 C2.22385763,19 2,18.7761424 2,18.5 C2,18.2238576 2.22385763,18 2.5,18 Z M14.5,20 L21.5,20 C21.7761424,20 22,20.2238576 22,20.5 C22,20.7761424 21.7761424,21 21.5,21 L14.5,21 C14.2238576,21 14,20.7761424 14,20.5 C14,20.2238576 14.2238576,20 14.5,20 Z M9.5,18 L21.5,18 C21.7761424,18 22,18.2238576 22,18.5 C22,18.7761424 21.7761424,19 21.5,19 L9.5,19 C9.22385763,19 9,18.7761424 9,18.5 C9,18.2238576 9.22385763,18 9.5,18 Z M2.5,20 L12.5,20 C12.7761424,20 13,20.2238576 13,20.5 C13,20.7761424 12.7761424,21 12.5,21 L2.5,21 C2.22385763,21 2,20.7761424 2,20.5 C2,20.2238576 2.22385763,20 2.5,20 Z" fill="#000000" opacity="0.3"/>
                                </g>
                            </svg></span>
                            {{'entity.study.study-frequency' | translate}}</label>
                        <div class="col-lg-9 col-xl-9">
                        <select formControlName="studyFrequency" class="form-control">
                            <option value="null">{{'personal.insert-study-frequency' | translate}}</option>
                            <option value="1">{{'personal.daily' | translate}}</option>
                            <option value="2">{{'personal.part-time' | translate}}</option>
                        </select>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-3 col-lg-3 col-form-label d-flex align-items-center">
                            <span class="svg-icon svg-icon-2x mr-2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24"/>
                                    <path d="M5.5,2 L18.5,2 C19.3284271,2 20,2.67157288 20,3.5 L20,6.5 C20,7.32842712 19.3284271,8 18.5,8 L5.5,8 C4.67157288,8 4,7.32842712 4,6.5 L4,3.5 C4,2.67157288 4.67157288,2 5.5,2 Z M11,4 C10.4477153,4 10,4.44771525 10,5 C10,5.55228475 10.4477153,6 11,6 L13,6 C13.5522847,6 14,5.55228475 14,5 C14,4.44771525 13.5522847,4 13,4 L11,4 Z" fill="#000000" opacity="0.3"/>
                                    <path d="M5.5,9 L18.5,9 C19.3284271,9 20,9.67157288 20,10.5 L20,13.5 C20,14.3284271 19.3284271,15 18.5,15 L5.5,15 C4.67157288,15 4,14.3284271 4,13.5 L4,10.5 C4,9.67157288 4.67157288,9 5.5,9 Z M11,11 C10.4477153,11 10,11.4477153 10,12 C10,12.5522847 10.4477153,13 11,13 L13,13 C13.5522847,13 14,12.5522847 14,12 C14,11.4477153 13.5522847,11 13,11 L11,11 Z M5.5,16 L18.5,16 C19.3284271,16 20,16.6715729 20,17.5 L20,20.5 C20,21.3284271 19.3284271,22 18.5,22 L5.5,22 C4.67157288,22 4,21.3284271 4,20.5 L4,17.5 C4,16.6715729 4.67157288,16 5.5,16 Z M11,18 C10.4477153,18 10,18.4477153 10,19 C10,19.5522847 10.4477153,20 11,20 L13,20 C13.5522847,20 14,19.5522847 14,19 C14,18.4477153 13.5522847,18 13,18 L11,18 Z" fill="#000000"/>
                                </g>
                            </svg></span>
                            {{'entity.study.faculty' | translate}}</label>
                        <div class="col-lg-9 col-xl-9">
                        <input formControlName="faculty" autocomplete="off"  class="form-control form-control-solid" type="text" 
                        [placeholder]="'personal.insert-faculty' | translate"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-3 col-lg-3 col-form-label d-flex align-items-center">
                            <span class="svg-icon svg-icon-2x mr-2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24"/>
                                    <path d="M5.5,4 L18.5,4 C19.3284271,4 20,4.67157288 20,5.5 L20,9.5 C20,10.3284271 19.3284271,11 18.5,11 L5.5,11 C4.67157288,11 4,10.3284271 4,9.5 L4,5.5 C4,4.67157288 4.67157288,4 5.5,4 Z M11,6 C10.4477153,6 10,6.44771525 10,7 C10,7.55228475 10.4477153,8 11,8 L13,8 C13.5522847,8 14,7.55228475 14,7 C14,6.44771525 13.5522847,6 13,6 L11,6 Z" fill="#000000" opacity="0.3"/>
                                    <path d="M5.5,13 L18.5,13 C19.3284271,13 20,13.6715729 20,14.5 L20,18.5 C20,19.3284271 19.3284271,20 18.5,20 L5.5,20 C4.67157288,20 4,19.3284271 4,18.5 L4,14.5 C4,13.6715729 4.67157288,13 5.5,13 Z M11,15 C10.4477153,15 10,15.4477153 10,16 C10,16.5522847 10.4477153,17 11,17 L13,17 C13.5522847,17 14,16.5522847 14,16 C14,15.4477153 13.5522847,15 13,15 L11,15 Z" fill="#000000"/>
                                </g>
                            </svg></span>
                            {{'entity.study.specialty' | translate}}</label>
                        <div class="col-lg-9 col-xl-9">
                        <input formControlName="specialty" autocomplete="off"  class="form-control form-control-solid" type="text" 
                        [placeholder]="'personal.insert-specialty' | translate"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-3 col-lg-3 col-form-label d-flex align-items-center">
                            <span class="svg-icon svg-icon-2x mr-2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24"/>
                                    <path d="M13,18.9450712 L13,20 L14,20 C15.1045695,20 16,20.8954305 16,22 L8,22 C8,20.8954305 8.8954305,20 10,20 L11,20 L11,18.9448245 C9.02872877,18.7261967 7.20827378,17.866394 5.79372555,16.5182701 L4.73856106,17.6741866 C4.36621808,18.0820826 3.73370941,18.110904 3.32581341,17.7385611 C2.9179174,17.3662181 2.88909597,16.7337094 3.26143894,16.3258134 L5.04940685,14.367122 C5.46150313,13.9156769 6.17860937,13.9363085 6.56406875,14.4106998 C7.88623094,16.037907 9.86320756,17 12,17 C15.8659932,17 19,13.8659932 19,10 C19,7.73468744 17.9175842,5.65198725 16.1214335,4.34123851 C15.6753081,4.01567657 15.5775721,3.39010038 15.903134,2.94397499 C16.228696,2.49784959 16.8542722,2.4001136 17.3003976,2.72567554 C19.6071362,4.40902808 21,7.08906798 21,10 C21,14.6325537 17.4999505,18.4476269 13,18.9450712 Z" fill="#000000" fill-rule="nonzero"/>
                                    <circle fill="#000000" opacity="0.3" cx="12" cy="10" r="6"/>
                                </g>
                            </svg></span>
                            {{'entity.study.qualification' | translate}}</label>
                        <div class="col-lg-9 col-xl-9">
                        <input formControlName="qualification" autocomplete="off"  class="form-control form-control-solid" type="text" 
                        [placeholder]="'personal.insert-qualification' | translate"/>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-xl-3 col-lg-3 col-form-label d-flex align-items-center">
                            <span class="svg-icon svg-icon-2x mr-2"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                    <rect x="0" y="0" width="24" height="24"/>
                                    <path d="M5.5,4 L18.5,4 C19.3284271,4 20,4.67157288 20,5.5 L20,9.5 C20,10.3284271 19.3284271,11 18.5,11 L5.5,11 C4.67157288,11 4,10.3284271 4,9.5 L4,5.5 C4,4.67157288 4.67157288,4 5.5,4 Z M11,6 C10.4477153,6 10,6.44771525 10,7 C10,7.55228475 10.4477153,8 11,8 L13,8 C13.5522847,8 14,7.55228475 14,7 C14,6.44771525 13.5522847,6 13,6 L11,6 Z" fill="#000000" opacity="0.3"/>
                                    <path d="M5.5,13 L18.5,13 C19.3284271,13 20,13.6715729 20,14.5 L20,18.5 C20,19.3284271 19.3284271,20 18.5,20 L5.5,20 C4.67157288,20 4,19.3284271 4,18.5 L4,14.5 C4,13.6715729 4.67157288,13 5.5,13 Z M11,15 C10.4477153,15 10,15.4477153 10,16 C10,16.5522847 10.4477153,17 11,17 L13,17 C13.5522847,17 14,16.5522847 14,16 C14,15.4477153 13.5522847,15 13,15 L11,15 Z" fill="#000000"/>
                                </g>
                            </svg></span>
                          {{'entity.study.study-type' | translate}}</label>
                        <div class="col-lg-9 col-xl-9">
                          <input class="form-control form-control-solid" disabled
                            autocomplete="off" 
                            type="text" 
                            [editable]="false"
                            [placeholder]="'personal.insert-study-type' | translate" 
                            [(ngModel)]="selectedItems[i]"
                            (ngModelChange)="selectStudyType($event, i)"
                            [ngModelOptions]="{ standalone: true }"
                            [ngbTypeahead]="searchStudyType(i, $text)" 
                            (focus)="focus$[i].next($any($event).target.value)"
                            (click)="click$[i].next($any($event).target.value)"
                            #instance="ngbTypeahead"
                            container="body"
                            [inputFormatter]="formatter" 
                            [resultFormatter]="formatter" />
                        </div>
                      </div>
                    <div *ngIf="!study.get('isActiveStudy').value" class="form-group row">
                        <label class="col-xl-3 col-lg-3 col-form-label">{{'entity.study.diploma-release-day' | translate}}</label>
                        <div class="col-lg-9 col-xl-9">
                            <app-date [isDisabled]="true" [parent]="study" [date]="'diplomaReleaseDay'" [placeholder]="'personal.insert-diploma-release-day' | translate"></app-date>
                        </div>
                    </div>
                    <div *ngIf="!study.get('isActiveStudy').value" class="form-group row">
                        <label class="col-xl-3 col-lg-3 col-form-label">{{'entity.study.diploma-number' | translate}}</label>
                        <div class="col-lg-9 col-xl-9">
                        <input formControlName="diplomaNumber" autocomplete="off"  class="form-control form-control-solid" type="text" 
                        [placeholder]="'personal.insert-diploma-number' | translate"/>
                        </div>
                    </div>
                </div>
                <div class="row justify-content-end mb-3">
                    <div class="col text-right">
                        <button type="button" class="btn btn-light-primary mr-2" (click)="openDeleteStudyModal(study.get('id').value)">{{'button.delete' | translate}}</button>
                        <button type="button" class="btn btn-light-success" (click)="openEditStudyModal(study, i)">{{'button.edit' | translate}}</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" *ngIf="!studies.length">
            <div class="col">
                {{'word.there-are-no-records-at-the-moment' | translate}}
            </div>
        </div>
        <div class="row" *ngIf="studies.length">
            <div class="col datatable datatable-default">
                <div pagination [page]="pagedSummary.currentPage" [total]="pagedSummary.totalPages" [size]="pagedSummary.pageSize" (sizeChange)="retrieveStudies({ page: pagedSummary.currentPage, itemsPerPage: $event })"
                    class="datatable-pager datatable-paging-loaded" (pageChange)="retrieveStudies({ page: $event })">
                </div>
            </div>
          </div>
      </div>
    </form> -->
    <app-loading-spinner *ngIf="isLoading" contentHeight="20rem" height="5rem" width="5rem"
                colorClass="text-primary"></app-loading-spinner>
    <div *ngIf="!isLoading">
        <form *ngIf="studyForm" class="col border" [formGroup]="studyForm">
            <app-loading-spinner *ngIf="isLoadingStudies" contentHeight="20rem" height="5rem" width="5rem"
                colorClass="text-primary"></app-loading-spinner>
            <div *ngIf="!isLoadingStudies">
                <div class="row my-5 ml-1">
                    <div class="col">
                        <h4>{{'step.Study' | translate}}</h4>
                    </div>
                </div>
                <div formArrayName="studies" class="ml-10">
                    <div class="box-square" [ngClass]="{'more': studyForm.controls.studies.controls.length > 1  &&
                                    (studyForm.controls.studies.controls.length - 1) !== i}"
                        *ngFor="let study of studyForm.controls.studies.controls;let i = index">
                        <div [formGroupName]="i">
                            <div class="row">
                                <div class="col-xl-6 col-12">
                                    <div class="form-group row required">
                                        <label class="col-xl-3 col-lg-3 col-form-label"
                                            for="studyTypeId">{{'study.study-type' | translate}}</label>
                                        <div class="col-lg-9 col-xl-9">
                                            <select class="form-control" formControlName="studyTypeId">
                                                <option value="null">{{'module-access.select' | translate}}</option>
                                                <option *ngFor="let item of studyTypes" [value]="item.value">{{
                                                    'studyTypes.' + item.translateId | translate}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-6 col-12">
                                    <div class="form-group row required">
                                        <label class="col-xl-3 col-lg-3 col-form-label">{{'entity.study.study-frequency' | translate}}</label>
                                        <div class="col-lg-9 col-xl-9">
                                            <select class="form-control" formControlName="studyFrequency">
                                                <option value="null">{{'module-access.select' | translate}}</option>
                                                <option *ngFor="let item of studyFrequences" [value]="item.value">{{
                                                    'studyFrequency.' + item.label | translate}}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xl-6 col-12">
                                    <div class="form-group row required">
                                        <label class="col-xl-3 col-lg-3 col-form-label">{{'entity.study.institution' | translate}}</label>
                                        <div class="col-lg-9 col-xl-9">
                                            <input formControlName="institution" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'entity.study.institution' | translate" />
                                            <div *ngIf="isInvalidPattern(study, 'institution')"
                                                class="invalid-feedback d-block">{{'validations.only-letters-and-dash' | translate}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-6 col-12">
                                    <div class="form-group row required">
                                        <label class="col-xl-3 col-lg-3 col-form-label">{{'entity.study.specialty' | translate}}</label>
                                        <div class="col-lg-9 col-xl-9">
                                            <input formControlName="specialty" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'entity.study.specialty' | translate" />
                                            <div *ngIf="isInvalidPattern(study, 'specialty')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-and-dash' | translate}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xl-6 col-12">
                                    <div class="form-group row required">
                                        <label class="col-xl-3 col-lg-3 col-form-label">{{'entity.study.faculty' | translate}}</label>
                                        <div class="col-lg-9 col-xl-9">
                                            <input formControlName="faculty" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'entity.study.faculty' | translate" />
                                            <div *ngIf="isInvalidPattern(study, 'faculty')"
                                                class="invalid-feedback d-block">
                                                {{'validations.only-letters-and-dash' | translate}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-6 col-12">
                                    <div class="form-group row required">
                                        <label class="col-xl-3 col-lg-3 col-form-label">{{'study.institution-address' | translate}}</label>
                                        <div class="col-lg-9 col-xl-9">
                                            <input formControlName="institutionAddress" autocomplete="off"
                                                class="form-control form-control-solid" type="text"
                                                [placeholder]="'study.institution-address' | translate" />
                                            <div *ngIf="isInvalidPattern(study, 'institutionAddress')"
                                                class="invalid-feedback d-block">{{'validations.only-letters-and-dash' | translate}}</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xl-6 col-12">
                                    <div class="form-group row required">
                                        <label class="col-xl-3 col-lg-3 col-form-label">{{'study.year-of-admision' | translate}}</label>
                                        <div class="col-lg-9 col-xl-9">
                                            <app-date [parent]="study" [date]="'yearOfAdmission'"
                                                [placeholder]="'study.year-of-admision' | translate"></app-date>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-6 col-12">
                                    <div class="form-group row required">
                                        <label class="col-xl-3 col-lg-3 col-form-label">{{'study.graduation-year' | translate}}</label>
                                        <div class="col-lg-9 col-xl-9">
                                            <app-date [parent]="study" [date]="'graduationYear'"
                                                [placeholder]="'study.graduation-year' | translate"></app-date>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="i > 0" class="row justify-content-end mb-3 mr-7">
                            <button class="btn btn-icon" (click)="removeStudy(i)">
                                <span class="font-size-18px">&times;</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="row justify-content-between ml-10">
                    <button class="btn btn-icon" (click)="addStudy()"><span class="font-size-18px">+</span></button>
                </div>
                <div class="row justify-content-end m-7">
                    <button class="btn btn-success" *ngIf="addOrEditStudyButton"
                        [disabled]="studyForm && studyForm.invalid " (click)="createStudies()">{{'stepper.button-update' | translate}}</button>
                    <button class="btn btn-success" *ngIf="!addOrEditStudyButton"
                        [disabled]="studyForm && studyForm.invalid" (click)="createStudies()">{{'stepper.button-add' | translate}}</button>
                </div>
            </div>
        </form>
        <form *ngIf="languageForm" class="col border" [formGroup]="languageForm">
            <app-loading-spinner *ngIf="isLoadingLanguages" contentHeight="20rem" height="5rem" width="5rem"
                colorClass="text-primary"></app-loading-spinner>
            <div *ngIf="!isLoadingLanguages">
                <div class="row my-5">
                    <div class="col">
                        <h4>{{'language.modern-language-level' | translate}}</h4>
                    </div>
                </div>
                <div formArrayName="modernLanguages" class="ml-10">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">{{'table.number' | translate}}</th>
                                <th scope="col">{{ 'language.name' | translate}}</th>
                                <th scope="col">{{ 'language.qualifier' |translate }}</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr [ngClass]="{'more': languageForm.controls.modernLanguages.controls.length > 1  &&
                        (languageForm.controls.modernLanguages.controls.length - 1) !== i}"
                                *ngFor="let modernLanguage of languageForm.controls.modernLanguages.controls;let i = index"
                                [formGroupName]="i">
                                <th scope="row">{{i + 1}}</th>
                                <td>
                                    <select class="form-control" formControlName="modernLanguageId">
                                        <option value="null">{{'module-access.select' | translate}}</option>
                                        <option *ngFor="let item of modernLanguages" [value]="item.value">{{ item.label }}
                                        </option>
                                    </select>
                                </td>
                                <td>
                                    <select class="form-control" formControlName="knowledgeQuelifiers">
                                        <option value="null">{{'module-access.select' | translate}}</option>
                                        <option *ngFor="let item of knowledgeQuelifiersEnum" [value]="item.value">{{
                                            'languageKnowledge.' + item.label | translate}}</option>
                                    </select>
                                </td>
                                <td>
                                    <div *ngIf="i > 0" class="row justify-content-end mb-3 mr-7">
                                        <button class="btn btn-icon" (click)="removeModernLanguage(i)">
                                            <span class="font-size-18px">&times;</span>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row justify-content-between ml-10">
                    <button class="btn btn-icon" (click)="addModernLanguage()"><span
                            class="font-size-18px">+</span></button>
                </div>
                <div class="row justify-content-end m-7">
                    <button class="btn btn-success" *ngIf="addOrEditLanguagesButton"
                        [disabled]="languageForm && languageForm.invalid "
                        (click)="creteModernLanguage()">{{'stepper.button-update' | translate}}</button>
                    <button class="btn btn-success" *ngIf="!addOrEditLanguagesButton"
                        [disabled]="languageForm && languageForm.invalid"
                        (click)="creteModernLanguage()">{{'stepper.button-add' | translate}}</button>
                </div>
            </div>
        </form>
        <form *ngIf="recommendationForm" class="col border" [formGroup]="recommendationForm">
            <app-loading-spinner *ngIf="isLoadingRecommandations" contentHeight="20rem" height="5rem" width="5rem"
                colorClass="text-primary"></app-loading-spinner>
            <div *ngIf="!isLoadingRecommandations">
                <div class="row my-5">
                    <div class="col">
                        <h4>{{'recommendation.recommendation-name' | translate}}</h4>
                    </div>
                </div>
                <div formArrayName="recommendation" class="ml-10">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">{{ 'table.number' | translate }}</th>
                                <th scope="col">{{ 'recommendation.table-user-name' | translate }}</th>
                                <th scope="col">{{ 'recommendation.table-user-last-name' | translate }}</th>
                                <th scope="col">{{ 'recommendation.table-function' | translate }}</th>
                                <th scope="col">{{ 'recommendation.table-subdivision' | translate }}</th>
                                <th scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr [ngClass]="{'more': recommendationForm.controls.recommendation.controls.length > 1  &&
                                                (recommendationForm.controls.recommendation.controls.length - 1) !== i}"
                                *ngFor="let recommendation of recommendationForm.controls.recommendation.controls; let i = index"
                                [formGroupName]="i">
                                <th scope="row">{{i + 1}}</th>
                                <td>
                                    <input formControlName="name" autocomplete="off" class="form-control form-control-solid"
                                        type="text" [placeholder]="'recommendation.user-name' | translate" />
                                </td>
                                <td>
                                    <input formControlName="lastName" autocomplete="off"
                                        class="form-control form-control-solid" type="text"
                                        [placeholder]="'recommendation.last-name' | translate" />
                                </td>
                                <td>
                                    <input formControlName="function" autocomplete="off"
                                        class="form-control form-control-solid" type="text"
                                        [placeholder]="'recommendation.table-function' | translate" />
                                </td>
                                <td>
                                    <input formControlName="subdivision" autocomplete="off"
                                        class="form-control form-control-solid" type="text"
                                        [placeholder]="'recommendation.table-subdivision' | translate" />
                                </td>
                                <td>
                                    <div *ngIf="i > 0" class="row justify-content-end mb-3 mr-7">
                                        <button class="btn btn-icon" (click)="removeRecommendation(i)">
                                            <span class="font-size-18px">&times;</span>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="row justify-content-between ml-10">
                    <button class="btn btn-icon" (click)="addRecommandation()"><span
                            class="font-size-18px">+</span></button>
                </div>
                <div class="row justify-content-end m-7">
                    <button class="btn btn-success" *ngIf="addOrEditRecommendationsButton"
                        [disabled]="recommendationForm && recommendationForm.invalid "
                        (click)="creteRecommendationForStudy()">{{'stepper.button-update' | translate}}</button>
                    <button class="btn btn-success" *ngIf="!addOrEditRecommendationsButton"
                        [disabled]="recommendationForm && recommendationForm.invalid"
                        (click)="creteRecommendationForStudy()">{{'stepper.button-add' | translate}}</button>
                </div>
            </div>
        </form>
    </div>
</div>