<app-loading-spinner *ngIf="isLoading" [contentHeight]="'20rem'" [height]="'5rem'" [width]="'5rem'"
  [colorClass]="'text-primary'">
</app-loading-spinner>
<div class="row w-100" *ngIf="!isLoading">
  <div class="col-lg-4 col-16 mt-lg-0 mt-3 text-end">
  </div>
  <div class="col-lg-2 col-16 mt-lg-0 mt-3">
    <h2 class="text-end">{{ 'months-name.' + monthsEnum[month]  | translate}}</h2>
  </div>
  <div class="col-lg-2 col-16 mt-lg-0 mt-3">
    <h2 class="text-start">{{ year }}</h2>
  </div>
  <div class="col-lg-4 col-16 mt-lg-0 mt-3">
  </div>
</div>
<div class="table-responsive datatable datatable-default table-overflow" *ngIf="!isLoading">
  <table class="table">
    <thead>
      <tr>
        <th>
          {{ 'timesheet-table.name'  | translate}}
        </th>
        <th> {{ 'timesheet-table.departament'  | translate }}</th>
        <th class="text-center" *ngFor='let key of daylist'>
          {{ key }}
        </th>
        <th> {{ 'timesheet-table.worked-hours'  | translate }}</th>
        <th> {{ 'timesheet-table.free-hours'  | translate }}</th>
        <th> {{ 'timesheet-table.working-days'  | translate }}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let contractor of contractorTimesheetTable" class="pointer">
        <ng-template #tipContent width='300px' height='60px'>
          <div class="card card-custom">
            <div class="card-body">
              <dl class="list-group nav list-inline">
                <dt>
                  <h6 class="tooltip-text"><span class="svg-icon svg-icon-primary svg-icon-2x">
                    <svg
                      xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="12px"
                      height="12px" viewBox="0 0 24 24" version="1.1">
                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <polygon points="0 0 24 0 24 24 0 24" />
                        <path
                          d="M18,14 C16.3431458,14 15,12.6568542 15,11 C15,9.34314575 16.3431458,8 18,8 C19.6568542,8 21,9.34314575 21,11 C21,12.6568542 19.6568542,14 18,14 Z M9,11 C6.790861,11 5,9.209139 5,7 C5,4.790861 6.790861,3 9,3 C11.209139,3 13,4.790861 13,7 C13,9.209139 11.209139,11 9,11 Z"
                          fill="#000000" fill-rule="nonzero" opacity="0.3" />
                        <path
                          d="M17.6011961,15.0006174 C21.0077043,15.0378534 23.7891749,16.7601418 23.9984937,20.4 C24.0069246,20.5466056 23.9984937,21 23.4559499,21 L19.6,21 C19.6,18.7490654 18.8562935,16.6718327 17.6011961,15.0006174 Z M0.00065168429,20.1992055 C0.388258525,15.4265159 4.26191235,13 8.98334134,13 C13.7712164,13 17.7048837,15.2931929 17.9979143,20.2 C18.0095879,20.3954741 17.9979143,21 17.2466999,21 C13.541124,21 8.03472472,21 0.727502227,21 C0.476712155,21 -0.0204617505,20.45918 0.00065168429,20.1992055 Z"
                          fill="#000000" fill-rule="nonzero" />
                      </g>
                    </svg>
                    </span> {{ contractor.department }}</h6>
                </dt>
                <dt>
                  <h6 class="tooltip-text"><span class="svg-icon svg-icon-primary svg-icon-2x">
                    <svg
                      xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px"
                      height="24px" viewBox="0 0 24 24" version="1.1">
                      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <rect x="0" y="0" width="24" height="24" />
                        <path
                          d="M8,3 L8,3.5 C8,4.32842712 8.67157288,5 9.5,5 L14.5,5 C15.3284271,5 16,4.32842712 16,3.5 L16,3 L18,3 C19.1045695,3 20,3.8954305 20,5 L20,21 C20,22.1045695 19.1045695,23 18,23 L6,23 C4.8954305,23 4,22.1045695 4,21 L4,5 C4,3.8954305 4.8954305,3 6,3 L8,3 Z"
                          fill="#000000" opacity="0.3" />
                        <path
                          d="M11,2 C11,1.44771525 11.4477153,1 12,1 C12.5522847,1 13,1.44771525 13,2 L14.5,2 C14.7761424,2 15,2.22385763 15,2.5 L15,3.5 C15,3.77614237 14.7761424,4 14.5,4 L9.5,4 C9.22385763,4 9,3.77614237 9,3.5 L9,2.5 C9,2.22385763 9.22385763,2 9.5,2 L11,2 Z"
                          fill="#000000" />
                        <rect fill="#000000" opacity="0.3" x="10" y="9" width="7" height="2" rx="1" />
                        <rect fill="#000000" opacity="0.3" x="7" y="9" width="2" height="2" rx="1" />
                        <rect fill="#000000" opacity="0.3" x="7" y="13" width="2" height="2" rx="1" />
                        <rect fill="#000000" opacity="0.3" x="10" y="13" width="7" height="2" rx="1" />
                        <rect fill="#000000" opacity="0.3" x="7" y="17" width="2" height="2" rx="1" />
                        <rect fill="#000000" opacity="0.3" x="10" y="17" width="7" height="2" rx="1" />
                      </g>
                    </svg>
                    </span> {{ contractor.role }}</h6>
                </dt>
              </dl>
            </div>
          </div>
        </ng-template>
        <td [routerLink]="['../personal', contractor.contractorId]">{{ contractor.contractorName }}</td>
        <td class="header-split" container="body" placement="right" animation="true" [ngbTooltip]="tipContent" tooltipClass="my-custom-class">
          <div class="department-header">
            <span class="department-text-header">{{ getCredentials(contractor.department) }}</span>
          </div>
          <div class="role-header">
            <span class="role-text-header">{{ getCredentials(contractor.role) }}</span>
          </div>
        </td>
        <td *ngFor="let value of contractor.content" class="text-center value-hover"
          (click)="openAddEditValuesModal(contractor, value)">
          {{ value.value }}
        </td>
        <td class="text-center">
          {{ contractor.workedHours }}
        </td>
        <td class="text-center">
          {{ contractor.freeHours }}
        </td>
        <td class="text-center">
          {{ contractor.workingDays }}
        </td>
      </tr>
    </tbody>
  </table>
  <div pagination [page]="pagedSummary.currentPage" [total]="pagedSummary.totalPages" [size]="pagedSummary.pageSize"
    (sizeChange)="list({ page: pagedSummary.currentPage, itemsPerPage: $event })"
    class="datatable-pager datatable-paging-loaded" (pageChange)="list({ page: $event })">
  </div>
</div>
