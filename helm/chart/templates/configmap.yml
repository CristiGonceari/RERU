kind: ConfigMap
apiVersion: v1
metadata:
  name: {{ .Values.name }}-application-settings
data:
  proxy-connect-timeout: "15"
  proxy-read-timeout: "600"
  proxy-send-timeout: "600"
  proxy-body-size: "250m"
  hsts-include-subdomains: "false"
  body-size: "250m"
  server-name-hash-bucket-size: "256"
  client-max-body-size: "250m"

  reru_public_gateway.appsettings.json: |
    {
      "Logging": {
        "LogLevel": {
          "Default": "Information",
          "Microsoft": "Warning",
          "Microsoft.Hosting.Lifetime": "Information"
        }
      },
      "AllowedHosts": "*",
      "Routes": [
        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/ms/reru-identity-new{everything}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-identity-new-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/ms/reru-identity-new{everything}",
          "UpstreamHeaderTransform":{
            "EXTERNAL_PROXIED": true
          }
        },

        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/api/{all}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-evaluation-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/ms/reru-evaluation/api/{all}"
        },

        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/api/{all}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-logging-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/ms/reru-logging/api/{all}"
        },

        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/api/{all}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-core-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/ms/reru-core/api/{all}",
          "RouteIsCaseSensitive": false
        },

        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/{all}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-personal-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/ms/reru-personal/{all}"
        },

        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/{everything}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-personal-fe-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/reru-personal{everything}"
        },

        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/{everything}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-evaluation-fe-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/reru-evaluation{everything}"
        },

        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/{everything}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-logging-fe-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/reru-logging{everything}"
        },

        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/{all}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "test-saml-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/ms/saml2/{all}"
        },
        
        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/{all}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-core-fe-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/{all}"
        }
      ],
    "GlobalConfiguration": {
        "BaseUrl": "http://reru.codwer.com"
    }

    }
  reru_internal_gateway.appsettings.json: |
    {
      "Logging": {
        "LogLevel": {
          "Default": "Information",
          "Microsoft": "Warning",
          "Microsoft.Hosting.Lifetime": "Information"
        }
      },
      "AllowedHosts": "*",
      "Routes": [
        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/internal/api/{all}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-core-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/reru-core/api/{all}"
        },
        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/internal/api/{all}",

          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-logging-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/reru-logging/api/{all}"
        },
        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/internal/api/{all}",
          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-personal-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/reru-personal/api/{all}"
        },
        {
          "HttpHandlerOptions": {
            "UseTracing": true
          },
          "DownstreamPathTemplate": "/internal/api/{all}",

          "DownstreamScheme": "http",
          "DownstreamHostAndPorts": [
            {
              "Host": "reru-evaluation-service",
              "Port": 8080
            }
          ],
          "UpstreamPathTemplate": "/reru-evaluation/api/{all}"
        }
      ]
    }
  reru_identity_new.appsettings.json: | 
    {
      "Logging": {
        "LogLevel": {
          "Default": "Debug",
          "Microsoft": "Warning",
          "Microsoft.Hosting.Lifetime": "Information"
        }
      },
      "AllowedHosts": "*",
      "IdentityServer": {
        "ApiScopes": [
          {
            "Name": "core"
          },
          {
            "Name": "personal"
          },
          {
            "Name": "evaluation"
          },
          {
            "Name": "logging"
          }
        ],
        "Clients": [
          {
            "ClientId": "RERU-Web-client",
            "ClientName": "RERU web client",
            "AllowedGrantTypes": ["implicit"],
            "AllowedScopes": ["openid", "core", "personal", "evaluation", "logging"],
            "RedirectUris": ["http://reru.codwer.com/#/auth-callback#"],
            "PostLogoutRedirectUris": ["http://reru.codwer.com/"],
            "AllowedCorsOrigins": ["http://reru.codwer.com"],
            "AllowAccessTokensViaBrowser": true,
            "AccessTokenLifetime": 3600
          }
        ]
      }
    }

  reru_core.appsettings.json: |
   {
      "Logging": {
        "IncludeScopes": false,
        "LogLevel": {
          "Default": "Debug",
          "System": "Information",
          "Microsoft": "Information"
        }
      },
      "Minio": {
          "endpoint": "reru-app-stage-minio:9000",
          "accessKey": "minioaccesskey",
          "secretKey": "miniosecretkey"
      },
      "SecurityKey": "TESTSECURITYKEY2018",
      "Smtp": {
        "FromName" : "Evaluare MAI",
        "From": "donotreply-dev@codwer.com",
        "EnableSsl": false,
        "Host": "smtp.office365.com",
        "Port": 587,
        "UserName": "donotreply-dev@codwer.com",
        "Password": "Zun94569",
        "RequiresAuthentication": true,
        "UseDefaultCredentials": false,
        "SystemErrorRecipients": "andrian.hubencu@codwer.com"
      },
      "AllowedHosts": "*",
      "MessageQueue": {
        "Hostname": "rabbitmq",
        "QueueName": "MessageQueue",
        "UserName": "user",
        "Password": "password"
      },

      "Module": {
        "UsesAuthentication": true,
        "Authentication": {
          "Authority": "http://reru-identity-new-service:8080/ms/reru-identity-new",
          "RequireHttpsMetadata": false
        },
        "IsCore": true,
        "InternalGatewayBaseUrl": "http://reru-internal-gateway-service:8080",
        "CoreClient": {
          "BaseUrl": "http://reru-internal-gateway-service:8080/reru-core/api"
        },
        "EvaluationClient": {
          "BaseUrl": "http://reru-internal-gateway-service:8080/reru-evaluation/api"
        },
        "PersonalClient": {
          "BaseUrl": "http://reru-internal-gateway-service:8080/reru-personal/api"
        },
        "LoggingClient": {
          "BaseUrl": "http://reru-internal-gateway-service:8080/reru-logging/api"
        }
      },

        "CoreSettings": {
          "Tenant": {
            "Name": "Evaluare MAI [Mediul de testare și dezvoltare]"
          },
          "ActiveTime": {
            "TokenLifetime": "0.00:05:00"
          }
        }
    }

  reru_evaluation.appsettings.json: | 
    {
       "Logging": {
          "IncludeScopes": false,
          "LogLevel": {
            "Default": "Debug",
            "System": "Information",
            "Microsoft": "Information"
          }
        },
        "Minio": {
          "endpoint": "reru-app-stage-minio:9000",
          "accessKey": "minioaccesskey",
          "secretKey": "miniosecretkey"
        },
        "SecurityKey": "TESTSECURITYKEY2018",
        "Smtp": {
          "FromName" : "Evaluare MAI",
          "From": "donotreply-dev@codwer.com",
          "EnableSsl": false,
          "Host": "smtp.office365.com",
          "Port": 587,
          "UserName": "donotreply-dev@codwer.com",
          "Password": "Zun94569",
          "RequiresAuthentication": true,
          "UseDefaultCredentials": false,
          "SystemErrorRecipients": "andrian.hubencu@codwer.com"
        },
      "TokenProviderOptions": {
          "Issuer": "TemplateServer",
          "Audience": "http://localhost:43991/"
        },
      "AllowedHosts": "*",
      "MessageQueue": {
          "Hostname": "rabbitmq",
          "QueueName": "MessageQueue",
          "UserName": "user",
          "Password": "password"
        },
      "EPPlus": {
          "ExcelPackage": {
            "LicenseContext": "Noncommercial" //The license context used
          }
        },
        "Module": {
          "Name": "EvaluationModule",
          "UsesAuthentication": true,
          "Authentication": {
            "Authority":"http://reru-identity-new-service:8080/ms/reru-identity-new",
            "RequireHttpsMetadata": false
          },
          "CoreClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-core/api"
          },
          "EvaluationClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-evaluation/api"
          },
          "PersonalClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-personal/api"
          },
          "LoggingClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-logging/api"
          }
        }
    }

  reru_logging.appsettings.json: | 
    {
       "Logging": {
          "IncludeScopes": false,
          "LogLevel": {
            "Default": "Debug",
            "System": "Information",
            "Microsoft": "Information"
          }
        },
        "Module": {
          "Name": "LoggingModule",
          "UsesAuthentication": true,
          "Authentication": {
            "Authority":"http://reru-identity-new-service:8080/ms/reru-identity-new",
            "RequireHttpsMetadata": false
          },
          "CoreClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-core/api"
          },
          "EvaluationClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-evaluation/api"
          },
          "PersonalClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-personal/api"
          },
          "LoggingClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-logging/api"
          }
        }
    }

  reru_personal.appsettings.json: | 
    {
       "Logging":{
          "IncludeScopes":false,
          "LogLevel":{
             "Default":"Debug",
             "System":"Information",
             "Microsoft":"Information"
          }
       },
      "Minio": {
          "endpoint": "reru-app-stage-minio:9000",
          "accessKey": "minioaccesskey",
          "secretKey": "miniosecretkey"
      },
       "SecurityKey":"TESTSECURITYKEY2018",
        "Smtp": {
          "FromName" : "Evaluare MAI",
          "From": "donotreply-dev@codwer.com",
          "EnableSsl": false,
          "Host": "smtp.office365.com",
          "Port": 587,
          "UserName": "donotreply-dev@codwer.com",
          "Password": "Zun94569",
          "RequiresAuthentication": true,
          "UseDefaultCredentials": false,
          "SystemErrorRecipients": "andrian.hubencu@codwer.com"
        },
       "TokenProviderOptions":{
          "Issuer":"TemplateServer",
          "Audience":"http://localhost:43991/"
       },
       "AzureBlob":{
          "ConnectionString":"{azure Blob COnnection string here}"
       },
       "AllowedHosts":"*",
       "MessageQueue":{
          "Hostname":"rabbitmq",
          "QueueName":"MessageQueue",
          "UserName":"user",
          "Password":"password"
       },
       "Module":{
          "Name":"PersonalModule",
          "UsesAuthentication":true,
          "Authentication":{
             "Authority":"http://reru-identity-new-service:8080/ms/reru-identity-new",
             "RequireHttpsMetadata":false
          },
          "CoreClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-core/api"
          },
          "EvaluationClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-evaluation/api"
          },
          "PersonalClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-personal/api"
          },
          "LoggingClient": {
            "BaseUrl": "http://reru-internal-gateway-service:8080/reru-logging/api"
          }
       },
       "DocumentOptions":{
          "Location":"path-to-save-documents"
       },
      "EmployerData": {
        "Type": "S.R.L",
        "Name": "CODWER",
        "PostCode": "2064",
        "City": "Chisinau",
        "Address": "Bd.Ștefan cel Mare și Sfînt nr. 202",
        "Idno": "1018600049308",
        "DirectorName": "Marius",
        "DirectorLastName": "Dumitrascu"
      }
    }

  reru_core_fe.appsettings.json: |
    {
      	"IDENTITY_AUTHORITY": "http://reru.codwer.com/ms/reru-identity-new",
        "IDENTITY_AUTHORITY_REDIRECT_URI": "http://reru.codwer.com/#/auth-callback#",
        "MODULE_SCOPE": "core",
        "CLIENT_ID": "RERU-Web-client",
        "SERVER_URL": "http://reru.codwer.com",
        "CORE_URL": "http://reru.codwer.com/ms/reru-core",
        "APP_BASE_URL": "http://reru.codwer.com/#",
        "production": true
    }

  reru_personal_fe.appsettings.json: |
    {
      	"IDENTITY_AUTHORITY": "http://reru.codwer.com/ms/reru-identity-new",
        "IDENTITY_AUTHORITY_REDIRECT_URI": "http://reru.codwer.com/#/auth-callback#",
        "MODULE_SCOPE": "personal",
        "CLIENT_ID": "RERU-Web-client",
        "SERVER_URL": "http://reru.codwer.com/ms/reru-personal",
        "CORE_URL": "http://reru.codwer.com/ms/reru-core",
        "APP_BASE_URL": "http://reru.codwer.com/reru-personal/#",
        "production": true
    }

  reru_evaluation_fe.appsettings.json: |
    {
      	"IDENTITY_AUTHORITY": "http://reru.codwer.com/ms/reru-identity-new",
        "IDENTITY_AUTHORITY_REDIRECT_URI": "http://reru.codwer.com/#/auth-callback#",
        "MODULE_SCOPE": "evaluation",
        "CLIENT_ID": "RERU-Web-client",
        "SERVER_URL": "http://reru.codwer.com/ms/reru-evaluation",
        "CORE_URL": "http://reru.codwer.com/ms/reru-core",
        "APP_BASE_URL": "http://reru.codwer.com/reru-evaluation/#",
        "production": true
    }

  reru_logging_fe.appsettings.json: |
    {
      	"IDENTITY_AUTHORITY": "http://reru.codwer.com/ms/reru-identity-new",
        "IDENTITY_AUTHORITY_REDIRECT_URI": "http://reru.codwer.com/#/auth-callback#",
        "MODULE_SCOPE": "logging",
        "CLIENT_ID": "RERU-Web-client",
        "SERVER_URL": "http://reru.codwer.com/ms/reru-logging",
        "CORE_URL": "http://reru.codwer.com/ms/reru-core",
        "APP_BASE_URL": "http://reru.codwer.com/reru-logging/#",
        "production": true
    }